/* NOTE: fo tokens are now defined by the theme cssVariablesResolver. */
/* Token bindings via surface role inversion (dark/light). */
:root[data-mantine-color-scheme="dark"],
body[data-mantine-color-scheme="dark"] {
  --fo-surface-page: var(--fo-charcoal-9);
  --fo-surface-card-hero: var(--fo-charcoal-8);
  --fo-surface-card-primary: var(--fo-charcoal-7);
  --fo-surface-pill: var(--fo-charcoal-7);

  --fo-text-primary: var(--fo-ivory);
  --fo-text-primary-rgb: var(--fo-ivory-rgb);
  --fo-text-deemphasized: rgba(var(--fo-ivory-rgb), var(--fo-alpha-60));
  --fo-text-onGold: var(--fo-charcoal-9);

  --fo-border: rgba(var(--fo-ivory-rgb), var(--fo-alpha-12));

  /* Ensure Mantine's internal "body" color aligns with our token surface. */
  --mantine-color-body: var(--fo-surface-page);
  --mantine-color-text: var(--fo-text-primary);

  /*
    Mantine defaults many interactive states (especially "subtle") to blue via
    CSS vars (e.g. `--mantine-color-blue-light-hover`). We keep the components
    token-skinned, so we rebind those blue vars to token colors to prevent any
    accidental palette leaks (including inline-style usage).
  */
  --mantine-color-blue-light-hover: var(--fo-surface-pill);
  --mantine-color-blue-light-color: var(--fo-text-primary);
  --mantine-color-blue-filled: var(--fo-gold-primary);
  --mantine-color-blue-filled-hover: var(--fo-button-primary-hover);
  --mantine-color-blue-outline: var(--fo-border);
  --mantine-color-blue-outline-hover: var(--fo-surface-pill);

  /* Back-compat aliases (keep values token-derived while we migrate CSS). */
  --bg: var(--fo-surface-page);
  --panel: var(--fo-surface-card-primary);
  --text: var(--fo-text-primary);
  --muted: var(--fo-text-deemphasized);
  --accent: var(--fo-gold-primary);
  --border: var(--fo-border);
  --error: var(--fo-text-primary);
  --success: var(--fo-text-primary);
}

:root[data-mantine-color-scheme="light"],
body[data-mantine-color-scheme="light"] {
  --fo-surface-page: var(--fo-ivory-warm);
  /* Page -> hero wrapper -> cards -> pills/nested. */
  --fo-surface-card-hero: var(--fo-ivory-step-1);
  --fo-surface-card-primary: var(--fo-ivory-step-2);
  --fo-surface-pill: var(--fo-ivory-step-3);

  --fo-text-primary: var(--fo-charcoal-9);
  --fo-text-primary-rgb: var(--fo-charcoal-rgb);
  --fo-text-deemphasized: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-60));
  --fo-text-onGold: var(--fo-charcoal-9);

  --fo-border: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-12));

  /* Ensure Mantine's internal "body" color aligns with our token surface. */
  --mantine-color-body: var(--fo-surface-page);
  --mantine-color-text: var(--fo-text-primary);

  /* Same palette leak prevention in light mode. */
  --mantine-color-blue-light-hover: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));
  --mantine-color-blue-light-color: var(--fo-text-primary);
  --mantine-color-blue-filled: var(--fo-gold-primary);
  --mantine-color-blue-filled-hover: var(--fo-button-primary-hover);
  --mantine-color-blue-outline: var(--fo-border);
  --mantine-color-blue-outline-hover: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));

  /* Pin Mantine's primary tokens to gold in light mode as well. */
  --mantine-primary-color-filled: var(--fo-gold-primary);
  --mantine-primary-color-filled-hover: var(--fo-button-primary-hover);
  --mantine-primary-color-light: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));
  --mantine-primary-color-light-hover: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));
  --mantine-primary-color-light-color: var(--fo-text-primary);
  --mantine-primary-color-outline: var(--fo-border);
  --mantine-primary-color-outline-hover: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));
  --mantine-primary-color-contrast: var(--fo-text-onGold);

  /* Back-compat aliases (keep values token-derived while we migrate CSS). */
  --bg: var(--fo-surface-page);
  --panel: var(--fo-surface-card-primary);
  --text: var(--fo-text-primary);
  --muted: var(--fo-text-deemphasized);
  --accent: var(--fo-gold-primary);
  --border: var(--fo-border);
  --error: var(--fo-text-primary);
  --success: var(--fo-text-primary);
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: var(--fo-surface-page);
  color: var(--fo-text-primary);
}

/* Typography variants (semantic roles only; no ad-hoc sizing in feature code). */
.mantine-Title-root[data-fo-typo="brand"] {
  font-size: var(--fo-heading-h2-size);
}

.mantine-Title-root[data-fo-typo="hero"] {
  font-size: var(--fo-font-size-hero-title);
  line-height: 1.1;
}

.mantine-Title-root[data-fo-typo="page"] {
  font-size: var(--fo-heading-h2-size);
}

.mantine-Title-root[data-fo-typo="section"] {
  font-size: var(--fo-heading-h3-size);
}

.mantine-Title-root[data-fo-typo="card"] {
  font-size: var(--fo-heading-h4-size);
}

.mantine-Text-root[data-fo-typo="meta"] {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-medium);
  /* Allow inverted surfaces (e.g. HeroCard) to provide a local muted color. */
  color: var(--fo-typo-muted, var(--fo-text-deemphasized));
}

.mantine-Text-root[data-fo-typo="helper"] {
  color: var(--fo-typo-muted, var(--fo-text-deemphasized));
}

.mantine-Text-root[data-fo-typo="muted"] {
  color: var(--fo-typo-muted, var(--fo-text-deemphasized));
}

.mantine-Text-root[data-fo-typo="danger"] {
  color: var(--fo-danger);
}

.mantine-Text-root[data-fo-typo="success"] {
  color: var(--fo-gold-primary);
}

.mantine-Text-root[data-fo-typo="chromeHeading"] {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-semibold);
  color: var(--fo-text-deemphasized);
  letter-spacing: var(--fo-letterSpacing-meta);
  text-transform: uppercase;
}

.mantine-Text-root[data-fo-typo="chromeFineprint"] {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-regular);
  color: var(--fo-text-deemphasized);
}

/* A11y: keyboard-only "Skip to content" link. Visible only on focus. */
.skip-link {
  position: absolute;
  left: var(--fo-db-skipLink-x);
  top: var(--fo-db-skipLink-y);
  padding: var(--fo-db-skipLink-paddingY) var(--fo-db-skipLink-paddingX);
  border-radius: var(--fo-db-skipLink-radius);
  background: var(--fo-surface-card-primary);
  color: var(--fo-text-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  box-shadow: var(--fo-db-skipLink-shadow);
  transform: translateY(-160%);
  transition: transform 120ms ease;
  z-index: 10000;
  text-decoration: none;
}

.skip-link:focus {
  transform: translateY(0);
  outline: none;
}

.skip-link:focus-visible {
  box-shadow: var(--fo-shadow-focusRing-gold), var(--fo-db-skipLink-shadow);
}

.fo-animalAvatar {
  width: var(--fo-animalAvatar-size, var(--fo-avatar-size-sm));
  height: var(--fo-animalAvatar-size, var(--fo-avatar-size-sm));
  border-radius: var(--fo-radius-pill);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.fo-animalAvatar::before {
  content: "";
  width: calc(var(--fo-animalAvatar-size, var(--fo-avatar-size-sm)) * 0.82);
  height: calc(var(--fo-animalAvatar-size, var(--fo-avatar-size-sm)) * 0.82);
  background: var(--fo-text-primary);
  -webkit-mask-image: var(--fo-animalAvatar-src);
  mask-image: var(--fo-animalAvatar-src);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;
}

/* Draft Room (scratch scaffold) */
.dr-frame {
  /* Fallback for browsers without dvh support. */
  height: 100vh;
  /* Use dvh to avoid browser chrome clipping the footer. */
  height: 100dvh;
  width: 100vw;
  position: relative;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--fo-surface-page);
}

.dr-cursorLayer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 12;
}

.dr-cursorGhost {
  position: absolute;
  left: var(--dr-cursor-x, 50%);
  top: var(--dr-cursor-y, 50%);
  transform: translate(calc(-1 * var(--fo-space-8)), calc(-1 * var(--fo-space-8)));
  display: inline-flex;
  align-items: center;
  gap: var(--fo-space-4);
}

.dr-cursorDot {
  width: var(--fo-hit-size-sm);
  height: var(--fo-hit-size-sm);
  border-radius: var(--fo-radius-pill);
  border: var(--fo-border-width) solid var(--fo-border-strong);
  background: var(--fo-surface-card-primary);
  box-shadow: var(--fo-shadow-chip);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.dr-cursorLabel {
  padding: var(--fo-space-hairline) var(--fo-space-4);
  border-radius: var(--fo-radius-pill);
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-semibold);
  color: var(--fo-text-primary);
  background: var(--fo-surface-page);
  border: var(--fo-border-width) solid var(--fo-border);
}

.dr-header {
  flex: 0 0 var(--fo-db-headerHeight);
  border-bottom: var(--fo-border-width) solid var(--fo-border);
}

.dr-mobileHeader {
  /* Mobile header is a flat bar, not a buckle. */
  flex: 0 0 var(--fo-db-headerHeight);
  background: var(--fo-surface-card-primary);
}

.dr-mobileHeader.is-podium {
  flex: 0 0 auto;
}

.dr-frame[data-turn="mine"] .dr-mobileHeader {
  background: var(--fo-gold);
}

.dr-mobileBar {
  height: 100%;
  display: grid;
  grid-template-columns: var(--fo-db-mobileIconSize) auto 1fr auto var(
      --fo-db-mobileIconSize
    );
  align-items: center;
  gap: var(--fo-space-dense-2);
  padding: 0 var(--fo-db-mobilePadX);
}

.dr-mobileHeader.is-podium .dr-mobileBar {
  height: var(--fo-db-headerHeight);
}

.dr-mobileBar.is-countdown {
  /* Only the active drafter pulses; this is a full-height bar treatment. */
  background: var(--fo-gold);
  transition: background 120ms ease;
}

.dr-mobileBar.is-countdown.pulse-red {
  background: var(--fo-danger);
}

.dr-mobileBar.is-countdown.pulse-red .drm-clockText,
.dr-mobileBar.is-countdown.pulse-red .drm-miniNumber {
  color: var(--fo-ivory);
}

.dr-mobileBar.is-countdown.pulse-red .drm-miniLabel {
  color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-78));
}

.dr-mobileIconBtn {
  width: var(--fo-db-mobileIconSize);
  height: var(--fo-db-mobileIconSize);
  border-radius: var(--fo-radius-pill);
}

.drm-miniStat {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: var(--fo-db-miniStat-minWidth);
  line-height: 1;
}

.drm-miniLabel {
  font-size: var(--fo-db-miniLabel-font);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tracked);
  text-transform: uppercase;
  color: var(--fo-text-deemphasized);
}

.drm-miniNumber {
  font-size: var(--fo-db-miniNumber-font);
  font-weight: var(--fo-font-weight-extrabold);
  color: var(--fo-text-primary);
}

.drm-clock {
  min-width: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.drm-clockText {
  font-size: var(--fo-db-clock-font);
  font-weight: var(--fo-font-weight-black);
  letter-spacing: var(--fo-letterSpacing-tight);
  color: var(--fo-text-primary);
  text-align: center;
  line-height: var(--fo-line-height-tight);
}

.dr-frame[data-turn="mine"] .drm-clockText,
.dr-frame[data-turn="mine"] .drm-miniNumber {
  color: var(--fo-charcoal-9);
}

.dr-frame[data-turn="mine"] .drm-miniLabel {
  color: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-72));
}

.drm-podiumStack {
  padding: 0 var(--fo-db-mobilePadX) var(--fo-space-8);
}

.drm-podiumBar {
  min-height: 2.125rem;
  border-radius: var(--fo-radius-pill);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 var(--fo-space-2) calc(var(--fo-space-4) + var(--fo-space-2))
      rgba(0, 0, 0, var(--fo-alpha-18)),
    inset 0 var(--fo-border-width) 0 rgba(255, 255, 255, var(--fo-alpha-14)),
    inset 0 calc(-1 * var(--fo-border-width)) 0 rgba(0, 0, 0, var(--fo-alpha-10));
}

.drm-podiumBar.is-gold {
  background: linear-gradient(
    to bottom,
    color-mix(in oklab, var(--fo-gold) 92%, white),
    color-mix(in oklab, var(--fo-gold) 86%, black)
  );
}

.drm-podiumBar.is-silver {
  background: linear-gradient(
    to bottom,
    color-mix(in oklab, #bcc2cc 92%, white),
    color-mix(in oklab, #bcc2cc 86%, black)
  );
}

.drm-podiumBar.is-bronze {
  background: linear-gradient(
    to bottom,
    color-mix(in oklab, #b07a3f 92%, white),
    color-mix(in oklab, #b07a3f 86%, black)
  );
}

.drm-podiumText {
  font-size: var(--fo-db-clock-font);
  font-weight: var(--fo-font-weight-black);
  letter-spacing: var(--fo-letterSpacing-tight);
  color: var(--fo-charcoal-9);
  text-align: center;
  line-height: var(--fo-line-height-tight);
  max-width: 100%;
}

.drm-podiumText.is-rolling {
  animation: drh-buckle-slot-roll 280ms cubic-bezier(0.16, 0.84, 0.22, 1);
}

.drh-row {
  position: relative;
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--fo-db-headerPadX);
}

.drh-measure {
  position: absolute;
  inset: 0;
  visibility: hidden;
  pointer-events: none;
  z-index: 0;
}

.drh-measureWing {
  position: absolute;
  top: 0;
  height: 100%;
  display: inline-flex;
  align-items: center;
  gap: var(--fo-db-wing-gap);
}

.drh-measureWing {
  left: 0;
}

.drh-measureWingRight {
  right: 0;
  left: auto;
  justify-content: flex-end;
}

/* Local contrast behind the centered buckle (same mechanism in both themes). */
.drh-row::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 0;
  height: 100%;
  width: calc(
    var(--drh-buckle-max, var(--fo-db-buckleMax-default)) +
      var(--fo-db-buckleBackdropExtra)
  );
  transform: translateX(-50%);
  pointer-events: none;
  z-index: 1;
  background: radial-gradient(
    ellipse at center,
    color-mix(in oklab, var(--fo-surface-page) 88%, black) 0%,
    color-mix(in oklab, var(--fo-surface-page) 94%, black) 42%,
    transparent 72%
  );
  opacity: var(--fo-alpha-55);
}

.drh-backWrap {
  position: relative;
  padding-right: var(--fo-space-xs);
  margin-right: var(--fo-space-4);
}

/* Partial rule to visually separate the back control from the header wing. */
.drh-backWrap::after {
  content: "";
  position: absolute;
  right: 0;
  top: 18%;
  bottom: 18%;
  width: var(--fo-border-width);
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-18));
}

:root[data-mantine-color-scheme="dark"] .drh-backWrap::after,
body[data-mantine-color-scheme="dark"] .drh-backWrap::after {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-18));
}

.drh-left,
.drh-right {
  display: flex;
  align-items: center;
  min-width: 0;
  gap: var(--fo-db-wing-gap);
  flex: 1 1 0;
  position: relative;
  z-index: 2;
}

.drh-wing {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-db-wing-gap);
  min-width: 0;
}

.drh-wingRight {
  justify-content: flex-end;
}

.drh-left {
  flex: 1 1 auto;
}

.drh-right {
  flex: 1 1 auto;
  justify-content: flex-end;
}

.drh-back {
  width: var(--fo-db-backSize);
  height: var(--fo-db-backSize);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--fo-radius-pill);
}

.drh-back .mi-icon {
  font-size: var(--fo-db-backIconSize);
}

.drh-back.is-disabled {
  opacity: var(--fo-alpha-50);
  cursor: default;
}

.drh-pauseWrap {
  position: relative;
  padding-right: var(--fo-space-xs);
  margin-right: var(--fo-space-4);
}

.drh-pauseWrap::after {
  content: "";
  position: absolute;
  right: 0;
  top: 18%;
  bottom: 18%;
  width: var(--fo-border-width);
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-18));
}

:root[data-mantine-color-scheme="dark"] .drh-pauseWrap::after,
body[data-mantine-color-scheme="dark"] .drh-pauseWrap::after {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-18));
}

.drh-pause {
  width: var(--fo-db-pauseSize);
  height: var(--fo-db-pauseSize);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--fo-radius-pill);
}

.drh-pause .mi-icon {
  font-size: var(--fo-db-pauseIconSize);
}

.drh-strip {
  min-width: 0;
  flex: 1 1 auto;
}

.drh-tokenWrap {
  position: relative;
  height: var(--fo-db-tokenWrapHeight);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.drh-token {
  width: var(--fo-db-tokenSize);
  height: var(--fo-db-tokenSize);
  border-radius: var(--fo-radius-pill);
  border: var(--fo-border-width) solid rgba(var(--fo-charcoal-rgb), var(--fo-alpha-25));
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

:root[data-mantine-color-scheme="dark"] .drh-token,
body[data-mantine-color-scheme="dark"] .drh-token {
  border-color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-24));
}

.drh-token.is-active {
  border-width: var(--fo-db-token-borderWidth);
  border-color: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-55));
}

:root[data-mantine-color-scheme="dark"] .drh-token.is-active,
body[data-mantine-color-scheme="dark"] .drh-token.is-active {
  border-color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-55));
}

.dr-frame[data-turn="mine"] .drh-token.is-active {
  border-color: var(--fo-gold);
}

.drh-overflow {
  background: transparent;
}

.drh-overflowText {
  font-size: calc(var(--fo-db-pill-font) + var(--fo-space-hairline));
  font-weight: 700;
  color: var(--fo-text-deemphasized);
  user-select: none;
}

.drh-chevron {
  position: absolute;
  bottom: calc(-1 * (var(--fo-space-dense-2) + var(--fo-space-4)));
  left: 50%;
  transform: translateX(-50%);
  font-size: var(--fo-font-size-sm);
  color: var(--fo-text-deemphasized);
  pointer-events: none;
}

.dr-frame[data-turn="mine"] .drh-chevron {
  color: var(--fo-gold);
}

.dr-rosterWinCount {
  font-size: var(--fo-font-size-xs);
  font-weight: 800;
  color: var(--fo-text-deemphasized);
  flex: 0 0 auto;
}

.drh-stripTip {
  display: grid;
  gap: var(--fo-space-dense-1);
}

.drh-tipRow {
  display: flex;
  align-items: center;
  gap: var(--fo-space-8);
}

.drh-tipText {
  font-size: var(--fo-font-size-xs);
  color: var(--fo-text-primary);
}

.drh-buckle {
  position: absolute;
  left: 50%;
  top: 0;
  transform: translateX(calc(-50% + var(--drh-buckle-shift-x, 0px)));
  height: 100%;
  padding: 0 var(--fo-db-headerPadX);
  display: grid;
  grid-template-columns:
    auto
    minmax(
      var(--fo-db-buckleContentMin),
      var(--drh-buckle-max, var(--fo-db-buckleMax-default))
    )
    auto;
  align-items: center;
  gap: var(--fo-db-buckleGap);
  border-radius: var(--fo-radius-pill);
  z-index: var(--drh-buckle-z-index, 3);

  /* Buckle depth model (same structure across themes; token values vary). */
  --drh-buckle-base: var(--fo-surface-card-primary);
  --drh-buckle-top: color-mix(in oklab, var(--drh-buckle-base) 92%, white);
  --drh-buckle-bottom: color-mix(in oklab, var(--drh-buckle-base) 86%, black);
  --drh-buckle-highlight: color-mix(in oklab, var(--drh-buckle-base) 55%, white);
  --drh-buckle-contact: rgba(0, 0, 0, var(--fo-alpha-22));

  background: linear-gradient(to bottom, var(--drh-buckle-top), var(--drh-buckle-bottom));
  /* Tight contact shadow (not a floating/elevation shadow). */
  box-shadow:
    0 var(--fo-space-2) calc(var(--fo-space-4) + var(--fo-space-2))
      var(--drh-buckle-contact),
    inset 0 var(--fo-border-width) 0 rgba(255, 255, 255, var(--fo-alpha-14)),
    inset 0 calc(-1 * var(--fo-border-width)) 0 rgba(0, 0, 0, var(--fo-alpha-10));
}

.drh-buckle.is-fixed {
  grid-template-columns: auto var(--drh-buckle-max, var(--fo-db-buckleMax-default)) auto;
}

/* Top highlight edge (overhead light). */
.drh-buckle::before {
  content: "";
  position: absolute;
  left: var(--fo-db-buckleHighlightInsetX);
  right: var(--fo-db-buckleHighlightInsetX);
  top: var(--fo-db-buckleHighlightTop);
  height: var(--fo-db-buckleHighlightHeight);
  border-radius: var(--fo-radius-pill);
  pointer-events: none;
  background: linear-gradient(
    to bottom,
    color-mix(in oklab, var(--drh-buckle-highlight) 62%, transparent),
    transparent
  );
  opacity: var(--fo-alpha-65);
}

.drh-buckle.is-pre {
  /* Pre-draft: use a more clearly defined neutral surface (reads as "gray" in light mode). */
  --drh-buckle-base: var(--fo-surface-pill);
}

.dr-frame[data-turn="mine"] .drh-buckle {
  --drh-buckle-base: var(--fo-gold);
  --drh-buckle-contact: rgba(0, 0, 0, var(--fo-alpha-18));
}

.dr-frame[data-results="final"] .drh-buckle {
  --drh-buckle-base: var(--fo-gold);
  --drh-buckle-contact: rgba(0, 0, 0, var(--fo-alpha-18));
}

.dr-frame[data-results="final"] .drh-buckle.is-silver {
  --drh-buckle-base: #bcc2cc;
}

.dr-frame[data-results="final"] .drh-buckle.is-bronze {
  --drh-buckle-base: #b07a3f;
}

.drh-buckle.is-podium-side {
  opacity: var(--fo-alpha-100);
}

/* Countdown pulse (5s window): toggled via class in sync with beeps. */
.drh-buckle.is-countdown {
  /* Default to gold for the countdown surface; JS toggles to pulse-red as needed. */
  --drh-buckle-base: var(--fo-gold);
  transition:
    background 120ms ease,
    box-shadow 120ms ease,
    color 120ms ease;
}

.drh-buckle.is-countdown.pulse-gold {
  --drh-buckle-base: var(--fo-gold);
}

.drh-buckle.is-countdown.pulse-red {
  /* Restrained red that still reads as urgency against our neutral palette. */
  --drh-buckle-base: var(--fo-danger);
  --drh-buckle-contact: rgba(0, 0, 0, var(--fo-alpha-26));
}

.drh-buckle.is-countdown.pulse-red .drh-buckleCenter,
.drh-buckle.is-countdown.pulse-red .drh-buckleNumber {
  color: var(--fo-ivory);
}

.drh-buckle.is-countdown.pulse-red .drh-buckleLabel {
  color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-78));
}

.drh-buckleStack {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  line-height: 1;
  min-width: var(--fo-db-mobileIconSize);
}

.drh-buckleLabel {
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tracked);
  text-transform: uppercase;
  color: var(--fo-text-deemphasized);
}

.drh-buckleNumber {
  font-size: var(--fo-db-meta-font);
  font-weight: var(--fo-font-weight-bold);
  color: var(--fo-text-primary);
}

.drh-buckleCenter {
  font-size: var(--fo-db-meta-font);
  font-weight: var(--fo-font-weight-bold);
  color: var(--fo-text-primary);
  text-align: center;
  grid-column: 2;
  justify-self: center;
  max-width: var(--drh-buckle-max, var(--fo-db-buckleMax-default));
}

.drh-buckleCenterStack {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  grid-column: 2;
  justify-self: center;
  min-width: 0;
  max-width: var(--drh-buckle-max, var(--fo-db-buckleMax-default));
  line-height: 1;
}

.drh-buckleCenterSlot {
  grid-column: 2;
  justify-self: center;
  width: 100%;
  max-width: var(--drh-buckle-max, var(--fo-db-buckleMax-default));
}

.drh-buckleCenterViewport {
  width: 100%;
  overflow: hidden;
}

.drh-buckleCenterType {
  font-size: calc(var(--fo-db-pill-font) - var(--fo-space-hairline));
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tracked);
  text-transform: uppercase;
  color: var(--fo-text-deemphasized);
}

.drh-buckleCenter.is-rolling {
  animation: drh-buckle-slot-roll 280ms cubic-bezier(0.16, 0.84, 0.22, 1);
}

@keyframes drh-buckle-slot-roll {
  0% {
    opacity: 0;
    transform: translateY(-80%);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.drh-buckle[data-mode="timer"] .drh-buckleCenter {
  font-size: calc(var(--fo-db-clock-font) + var(--fo-space-2)); /* 18px */
  font-weight: var(--fo-font-weight-black);
  letter-spacing: var(--fo-letterSpacing-subtle);
}

.dr-frame[data-turn="mine"] .drh-buckleCenter,
.dr-frame[data-turn="mine"] .drh-buckleNumber {
  color: var(--fo-charcoal-9);
}

.dr-frame[data-results="final"] .drh-buckleCenter,
.dr-frame[data-results="final"] .drh-buckleNumber {
  color: var(--fo-charcoal-9);
}

.dr-frame[data-turn="mine"] .drh-buckleLabel {
  color: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-72));
}

.dr-frame[data-results="final"] .drh-buckleLabel {
  color: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-72));
}

.dr-frame[data-turn="mine"] .drh-buckleCenter,
.dr-frame[data-turn="mine"] .drh-buckleNumber,
.dr-frame[data-turn="mine"] .drh-buckleLabel {
  /* Always dark-on-gold, regardless of theme. */
  text-shadow: none;
}

.dr-frame[data-results="final"] .drh-buckleCenter,
.dr-frame[data-results="final"] .drh-buckleNumber,
.dr-frame[data-results="final"] .drh-buckleLabel {
  /* Always dark-on-gold, regardless of theme. */
  text-shadow: none;
}

/* Draft plans */
.draft-plan-row {
  padding: var(--fo-space-8) var(--fo-space-dense-2);
  border-bottom: var(--fo-border-width) solid
    rgba(var(--fo-charcoal-rgb), var(--fo-alpha-14));
  border-radius: var(--fo-radius-medium);
  cursor: grab;
}
.draft-plan-row:hover {
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-04));
}
.draft-plan-row:active {
  cursor: grabbing;
}
.draft-plan-row.is-dragging {
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));
  box-shadow: var(--fo-shadow-dragging);
  cursor: grabbing;
}
.draft-plan-drag {
  padding: 0;
  color: var(--fo-text-deemphasized);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.draft-plan-indexWrap {
  position: relative;
  width: 1.875rem;
  height: 1.5rem;
  flex: 0 0 auto;
}
.draft-plan-indexValue {
  position: absolute;
  inset: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-semibold);
  color: var(--fo-text-deemphasized);
  pointer-events: none;
}
.draft-plan-indexInput {
  position: absolute;
  inset: 0;
  width: 100%;
  border: var(--fo-border-width) solid var(--fo-border);
  border-radius: var(--fo-radius-small);
  background: var(--fo-surface-pill);
  color: var(--fo-text-primary);
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-semibold);
  text-align: center;
  opacity: 0;
  pointer-events: none;
}
.draft-plan-indexInput::-webkit-outer-spin-button,
.draft-plan-indexInput::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.draft-plan-indexInput[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}
.draft-plan-row:hover .draft-plan-indexInput,
.draft-plan-indexWrap:focus-within .draft-plan-indexInput {
  opacity: 1;
  pointer-events: auto;
}
.draft-plan-row:hover .draft-plan-indexValue,
.draft-plan-indexWrap:focus-within .draft-plan-indexValue {
  opacity: 0;
}
.draft-plan-rowText {
  font-size: var(--fo-font-size-xs);
  font-weight: 600;
  color: var(--fo-text-primary);
}
.draft-plans-controls {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  gap: var(--fo-space-sm);
}
.draft-plans-selectWrap {
  width: 33%;
  min-width: 16.25rem;
}
.draft-plans-actions {
  margin-left: auto;
}

.drh-right {
  gap: var(--fo-db-headerRight-gap);
}

.drh-controlsGrid {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--fo-space-dense-1);
}

.drh-label {
  font-size: var(--fo-db-meta-font);
  font-weight: var(--fo-font-weight-bold);
  color: var(--fo-text-deemphasized);
  white-space: nowrap;
}

.drh-toggleSlot,
.drh-togglePlaceholder {
  width: var(--fo-db-mobileRailBtn-width);
  display: flex;
  justify-content: flex-end;
}

.drh-controlRow {
  width: 100%;
  justify-content: center;
}

.drh-togglePlaceholder {
  height: calc(var(--fo-space-8) + var(--fo-space-dense-2) + var(--fo-space-4));
  opacity: var(--fo-alpha-00);
}

.drh-stowaways {
  min-width: 0;
  border-left: var(--fo-border-width) solid
    rgba(var(--fo-charcoal-rgb), var(--fo-alpha-18));
  padding-left: var(--fo-space-xs);
}

:root[data-mantine-color-scheme="dark"] .drh-stowaways,
body[data-mantine-color-scheme="dark"] .drh-stowaways {
  border-left-color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-18));
}

.drh-userBadge {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-space-8);
  padding: var(--fo-space-dense-1) var(--fo-space-dense-2);
  border-radius: var(--fo-radius-pill);
  border: var(--fo-border-width) solid rgba(var(--fo-charcoal-rgb), var(--fo-alpha-18));
}

:root[data-mantine-color-scheme="dark"] .drh-userBadge,
body[data-mantine-color-scheme="dark"] .drh-userBadge {
  border-color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-20));
}

.drh-userText {
  font-size: var(--fo-font-size-xs);
  font-weight: 700;
  color: var(--fo-text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: var(--fo-db-userText-maxWidth);
}

.dr-footer {
  flex: 0 0 auto;
  border-top: var(--fo-border-width) solid var(--fo-border);
  padding: var(--fo-gutter-mobile) 0;
}

.dr-footer .site-footer {
  /* Draft room owns the divider and spacing; avoid nested footer chrome. */
  margin-top: 0;
  padding-top: 0;
  border-top: 0;
  gap: 0;
}

.dr-footer .footer-fineprint {
  /* Prevent the fineprint from re-introducing placeholder bars. */
  padding-top: 0;
  border-top: 0;
}

.dr-body {
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.dr-mobileScroll {
  height: 100%;
  overflow: auto;
  padding: var(--fo-space-xs);
}

.dr-mobileBottomBar {
  flex: 0 0 var(--fo-db-mobileBottomBarHeight);
  border-top: var(--fo-border-width) solid var(--fo-border);
  background: var(--fo-surface-card-primary);
  display: flex;
  align-items: center;
  padding: 0 var(--fo-db-mobileBottomBarPadX);
}

.dr-mobileRailBtn {
  width: var(--fo-db-mobileRailBtn-width);
  height: var(--fo-db-mobileRailBtn-height);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--fo-db-mobileRailBtn-radius);
  color: var(--fo-text-deemphasized);
}

.dr-mobileRailBtn .mi-icon {
  font-size: var(--fo-db-mobileRailBtn-iconSize);
}

.dr-mobileRailBtn.is-active {
  background: rgba(var(--fo-text-primary-rgb), var(--fo-alpha-08));
  color: var(--fo-text-primary);
}

.dr-mobileRailBtn.is-disabled {
  opacity: var(--fo-alpha-40);
  cursor: not-allowed;
}

.dr-mobileRailPane {
  padding: calc(var(--fo-space-4) + var(--fo-space-2)) var(--fo-space-2) var(--fo-space-0);
}

.dr-mobileCategories .dr-card {
  width: 100%;
}

.dr-layout {
  /* "Unit" = full draft frame width divided by the chosen divisor.
     The divisor is set at runtime to keep units within a readable pixel range. */
  --d: 7.75;
  --u: calc(100vw / var(--d));
  --rail-ledger: 1.25;
  --rail-roster: 1.25;
  --rail-auto: 1.25;
  --mid-cols: 7;
  --col-inset-u: 0.07;
  height: 100%;
  width: 100%;
  display: grid;
  grid-template-columns:
    calc(var(--u) * var(--rail-ledger))
    calc(var(--u) * var(--mid-cols))
    calc(var(--u) * var(--rail-roster))
    calc(var(--u) * var(--rail-auto));
}

.dr-layout > * {
  /* Critical for scrollable children inside grid items. */
  min-height: 0;
}

.dr-rail {
  position: relative;
  display: flex;
  align-items: stretch;
  justify-content: stretch;
  height: 100%;
  width: 100%;
  min-height: 0;
  padding: 0;
  border: 0;
  background: var(--fo-surface-card-primary);
  cursor: default;
}

.dr-railToggle {
  height: 100%;
  width: 100%;
  padding: 0;
  border: 0;
  background: transparent;
  cursor: pointer;
}

.dr-railToggle.is-disabled,
.dr-railToggle[aria-disabled="true"] {
  cursor: not-allowed;
}

.dr-railToggle:focus-visible {
  outline: var(--fo-border-width-strong) solid
    rgba(var(--fo-charcoal-rgb), var(--fo-alpha-24));
  outline-offset: calc(var(--fo-space-0) - var(--fo-border-width-strong));
}

:root[data-mantine-color-scheme="dark"] .dr-railToggle:focus-visible,
body[data-mantine-color-scheme="dark"] .dr-railToggle:focus-visible {
  outline: var(--fo-border-width-strong) solid
    rgba(var(--fo-ivory-rgb), var(--fo-alpha-20));
}

.dr-rail.is-open {
  border: var(--fo-border-width) solid var(--fo-border);
  z-index: 1;
}

.dr-rail.is-collapsed {
  border: var(--fo-border-width) solid var(--fo-border);
  z-index: 2; /* keep stub icons visible when adjacent rails are open */
}

.dr-rail-ledger {
  /* Rail-to-box gap is controlled by the box's 5px inset. */
  margin-right: 0;
}

.dr-rail-roster {
  /* Rail-to-box gap is controlled by the box's 5px inset. */
  margin-left: 0;
}

.dr-rail-autodraft {
  /* No padding/cut - stays flush. */
  margin: 0;
}

.dr-rail-label {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  writing-mode: vertical-rl;
  text-transform: uppercase;
  letter-spacing: var(--fo-letterSpacing-rail);
  font-size: var(--fo-db-meta-font);
  font-weight: var(--fo-font-weight-bold);
  color: var(--fo-text-deemphasized);
  user-select: none;
}

.dr-rail-label-right {
  writing-mode: vertical-lr;
}

.dr-railPane {
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden; /* prevent scroll chaining via the pane wrapper */
}

.dr-railPaneHeader {
  flex: 0 0 var(--fo-db-tokenWrapHeight);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--fo-space-0) var(--fo-space-xs);
  border-bottom: var(--fo-border-width) solid var(--fo-border);
}

.dr-railPaneTitleRow {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-space-8);
  min-width: 0;
}

.dr-railPaneTitle {
  font-size: var(--fo-db-meta-font);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tracked);
  text-transform: uppercase;
  color: var(--fo-text-primary);
}

.dr-railStubIcon {
  width: 100%;
  height: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fo-db-backIconSize);
  color: var(--fo-text-deemphasized);
  user-select: none;
}

.dr-railClose {
  width: var(--fo-hit-size-sm);
  height: var(--fo-hit-size-sm);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--fo-radius-pill);
  color: var(--fo-text-deemphasized);
}

.dr-railClose:hover {
  background: rgba(var(--fo-text-primary-rgb), var(--fo-alpha-06));
  color: var(--fo-text-primary);
}

.dr-railPaneBody {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  overscroll-behavior: contain; /* keep each rail's scroll independent */
  padding: var(--fo-space-dense-2) var(--fo-space-dense-2) var(--fo-space-xs);
}

.dr-railList {
  display: flex;
  flex-direction: column;
  gap: var(--fo-space-4);
}

.dr-railRow {
  display: grid;
  align-items: center;
  gap: var(--fo-space-8);
  min-width: 0;
}

.dr-ledgerRow {
  /* Tighten the left meta + avatar cluster; the "gap" here is mostly column width. */
  grid-template-columns: max-content var(--fo-hit-size-sm) 1fr;
  column-gap: var(--fo-space-2);
  row-gap: var(--fo-space-0);
}

.dr-rosterRow {
  grid-template-columns: max-content 1fr;
  column-gap: var(--fo-space-2);
  row-gap: var(--fo-space-0);
}

.dr-railMeta {
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tracked);
  color: var(--fo-text-deemphasized);
  text-transform: uppercase;
}

.dr-railAvatar {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.dr-railEmpty {
  font-size: var(--fo-db-meta-font);
  color: var(--fo-text-deemphasized);
  padding: calc(var(--fo-space-4) + var(--fo-space-2)) var(--fo-space-2);
}

.dr-pill-static {
  cursor: default;
}

.dr-pill-icon {
  margin-right: calc(var(--fo-space-4) + var(--fo-space-2)); /* 6px */
  flex: 0 0 auto;
}

.dr-middle {
  position: relative;
  height: 100%;
  width: 100%;
  background: transparent;
  /* The draft area scrolls; header/footer/rails stay fixed in-frame. */
  overflow-y: auto;
  overflow-x: hidden;
  overscroll-behavior: contain; /* prevent scroll from propagating into other panes */
  min-height: 0;
}

.dr-roster {
  padding: var(--fo-space-xs) var(--fo-space-0);
}

.dr-rosterGrid {
  --roster-unit: calc(100vw / 6.25);
  --roster-cols: 6;
  width: calc(var(--roster-unit) * var(--roster-cols));
  margin-inline: auto;
  display: grid;
  grid-template-columns: repeat(var(--roster-cols), var(--roster-unit));
  column-gap: 0;
}

.dr-rosterCol {
  box-sizing: border-box;
  padding: var(--fo-space-0) var(--fo-space-dense-1);
  min-width: 0;
}

.dr-rosterCard {
  /* Use the same card treatment as category cards, but keep roster columns within their grid cell. */
  margin-inline: 0;
}

.dr-rosterPickText {
  color: var(--fo-text-primary);
}

.dr-rosterColHeader {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--fo-space-8);
  margin-bottom: var(--fo-space-dense-2);
}

.dr-rosterName {
  font-size: var(--fo-db-meta-font);
  font-weight: var(--fo-font-weight-bold);
  color: var(--fo-text-primary);
  max-width: calc(var(--roster-unit) - var(--fo-db-mobileRailBtn-width));
}

.dr-rosterPicks {
  min-height: 0;
}

.dr-rosterPill {
  height: var(--fo-db-pill-rowHeight);
  padding: 0 var(--fo-db-pill-paddingX);
  border-radius: var(--fo-radius-pill);
  background: var(--fo-surface-pill);
  display: flex;
  align-items: center;
  justify-content: center;
}

.dr-rosterPillText {
  font-size: var(--fo-db-pill-font);
  font-weight: 400;
  color: var(--fo-text-primary);
}

.dr-rosterNav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: calc(var(--fo-control-height) + var(--fo-space-2)); /* 34px */
  height: calc(var(--fo-control-height) + var(--fo-space-2)); /* 34px */
  padding: 0;
  box-sizing: border-box;
  border-radius: var(--fo-radius-pill);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--fo-surface-card-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  z-index: 4;
}

.dr-rosterNav.is-left {
  left: var(--fo-space-dense-2);
}

.dr-rosterNav.is-right {
  right: var(--fo-space-dense-2);
}

.dr-rosterNav.is-disabled {
  opacity: var(--fo-alpha-45);
  cursor: default;
}

.ceremony-card {
  text-decoration: none;
  color: inherit;
}

.ceremony-card.is-archived {
  opacity: var(--fo-alpha-75);
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-02));
}

:root[data-mantine-color-scheme="dark"] .ceremony-card.is-archived,
body[data-mantine-color-scheme="dark"] .ceremony-card.is-archived {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-02));
}

.dr-middle-columns {
  position: absolute;
  inset: 0;
  width: 100%;
  display: grid;
  grid-template-columns: repeat(var(--mid-cols), minmax(0, 1fr));
  column-gap: 0;
  pointer-events: none;
}

.dr-mid-col {
  border-right: var(--fo-border-width) solid var(--fo-border);
  opacity: var(--fo-alpha-35);
}

.dr-mid-col:last-child {
  border-right: 0;
}

.dr-masonry {
  position: relative;
  /* Let content define scroll height inside the draft area. */
  height: auto;
  min-height: 100%;
  width: 100%;
  display: grid;
  grid-template-columns: repeat(var(--mid-cols), minmax(0, 1fr));
  column-gap: 0;
  /* All horizontal spacing is controlled via per-box insets (5px per side). */
  padding: 0;
}

.dr-masonry-col {
  display: flex;
  flex-direction: column;
  gap: var(--fo-space-xs);
  padding-inline: 0;
}

.dr-box {
  /* legacy */
}

.dr-card {
  border: var(--fo-border-width) solid var(--fo-border);
  border-radius: var(--fo-radius-small);
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-03));
  margin-inline: var(--fo-space-dense-1);
  padding: var(--fo-space-dense-2);
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

:root[data-mantine-color-scheme="dark"] .dr-card,
body[data-mantine-color-scheme="dark"] .dr-card {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-03));
}

.dr-card-titleRow {
  display: flex;
  align-items: center;
  gap: calc(var(--fo-space-4) + var(--fo-space-2)); /* 6px */
  margin: var(--fo-space-0) var(--fo-space-0) var(--fo-space-dense-2) var(--fo-space-0);
  cursor: default;
}

.dr-card-titleRow:focus-visible {
  outline: none;
  border-radius: calc(var(--fo-radius-medium) + var(--fo-space-2)); /* 10px */
  box-shadow: var(--fo-shadow-focusRing-neutral-strong-light);
}

:root[data-mantine-color-scheme="dark"] .dr-card-titleRow:focus-visible,
body[data-mantine-color-scheme="dark"] .dr-card-titleRow:focus-visible {
  box-shadow: var(--fo-shadow-focusRing-neutral-strong-dark);
}

.dr-icon-dot {
  width: var(--fo-icon-size-sm);
  height: var(--fo-icon-size-sm);
  border-radius: 50%;
  background: var(--fo-charcoal-9);
  display: inline-block;
  flex: 0 0 auto;
}

.mi-icon.dr-icon-punchout {
  /* "Punched out" = contrasting-ink circle with glyph in the page background color. */
  background: var(--fo-text-primary);
  color: var(--fo-surface-page);
}

.mi-icon.mi-icon-tiny.dr-icon-punchout {
  /* Keep the circle only ~1px larger than the glyph (minimize footprint). */
  padding: var(--fo-space-hairline);
}

.dr-card-title {
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-bold);
  color: var(--fo-text-primary);
  margin: var(--fo-space-0);
  text-align: left;
}

.dr-card-weight {
  margin-left: auto;
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-medium);
  color: var(--fo-text-deemphasized);
}

.dr-card-pills {
  display: flex;
  flex-direction: column;
  gap: calc(var(--fo-space-4) + var(--fo-space-2)); /* 6px */
}

.dr-pill {
  height: calc(
    var(--fo-db-pill-rowHeight) + var(--fo-space-dense-1) + var(--fo-space-hairline)
  ); /* 22px */
  border-radius: var(--fo-radius-pill);
  border: var(--fo-border-width) solid var(--fo-border);
  background: transparent;
  padding-inline: var(--fo-space-dense-2);
  display: flex;
  align-items: center;
  overflow: hidden;
  cursor: default;
}

.dr-pill-btn {
  width: 100%;
  text-align: left;
}

.dr-pill-btn:focus-visible {
  outline: none;
  box-shadow: var(--fo-shadow-focusRing-neutral-strong-light);
}

:root[data-mantine-color-scheme="dark"] .dr-pill-btn:focus-visible,
body[data-mantine-color-scheme="dark"] .dr-pill-btn:focus-visible {
  box-shadow: var(--fo-shadow-focusRing-neutral-strong-dark);
}

.dr-pill-static:focus-visible {
  outline: none;
  box-shadow: var(--fo-shadow-focusRing-neutral-strong-light);
}

:root[data-mantine-color-scheme="dark"] .dr-pill-static:focus-visible,
body[data-mantine-color-scheme="dark"] .dr-pill-static:focus-visible {
  box-shadow: var(--fo-shadow-focusRing-neutral-strong-dark);
}

.dr-railPaneBody:focus-visible,
.dr-middle:focus-visible {
  outline: none;
  box-shadow: var(--fo-shadow-focusRing-neutral-soft-light);
}

:root[data-mantine-color-scheme="dark"] .dr-railPaneBody:focus-visible,
:root[data-mantine-color-scheme="dark"] .dr-middle:focus-visible,
body[data-mantine-color-scheme="dark"] .dr-railPaneBody:focus-visible,
body[data-mantine-color-scheme="dark"] .dr-middle:focus-visible {
  box-shadow: var(--fo-shadow-focusRing-neutral-soft-dark);
}

.dr-pill-text {
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-regular);
  color: var(--fo-text-deemphasized);
  user-select: none;
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dr-pill-points {
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-medium);
  color: var(--fo-text-deemphasized);
  margin-left: var(--fo-space-8);
  flex: 0 0 auto;
  user-select: none;
}

.dr-pill.is-muted {
  opacity: var(--fo-alpha-50);
}

.dr-pill.is-hoverMatch {
  background: var(--fo-gold-primary);
  border-color: rgba(var(--fo-gold-rgb), var(--fo-alpha-65));
  box-shadow: 0 0 0 var(--fo-border-width) rgba(var(--fo-gold-rgb), var(--fo-alpha-40));
}

.dr-pill.is-hoverMatch .dr-pill-text,
.dr-pill.is-hoverMatch .dr-pill-points {
  color: var(--fo-text-onGold);
  font-weight: var(--fo-font-weight-medium);
}

.dr-pill.is-hoverMatch.is-muted {
  opacity: 1;
}

.dr-pill.is-winner {
  background: var(--fo-gold-primary);
  border-color: rgba(var(--fo-gold-rgb), var(--fo-alpha-65));
}

.dr-pill.is-winner .dr-pill-text {
  color: var(--fo-text-onGold);
  font-weight: var(--fo-font-weight-medium);
}

/* "My turn" pill interaction (draft board only). Tooltip remains unchanged. */
.dr-frame[data-turn="mine"] .dr-card-pills .dr-pill-btn {
  cursor: pointer;
  transition:
    transform 120ms ease,
    box-shadow 120ms ease,
    background 120ms ease,
    border-color 120ms ease;
}

.dr-frame[data-turn="mine"] .dr-card-pills .dr-pill-btn:hover,
.dr-frame[data-turn="mine"] .dr-card-pills .dr-pill-btn:active {
  border-color: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-35));
  background: var(--fo-gold-primary);
  transform: translateY(calc(var(--fo-space-0) - var(--fo-space-hairline)));
  box-shadow: var(--fo-shadow-draft-pillHover-light);
}

:root[data-mantine-color-scheme="dark"]
  .dr-frame[data-turn="mine"]
  .dr-card-pills
  .dr-pill-btn:hover,
:root[data-mantine-color-scheme="dark"]
  .dr-frame[data-turn="mine"]
  .dr-card-pills
  .dr-pill-btn:active,
body[data-mantine-color-scheme="dark"]
  .dr-frame[data-turn="mine"]
  .dr-card-pills
  .dr-pill-btn:hover,
body[data-mantine-color-scheme="dark"]
  .dr-frame[data-turn="mine"]
  .dr-card-pills
  .dr-pill-btn:active {
  border-color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-18));
  box-shadow: var(--fo-shadow-draft-pillHover-dark);
}

.dr-frame[data-turn="mine"] .dr-card-pills .dr-pill-btn:hover .dr-pill-text,
.dr-frame[data-turn="mine"] .dr-card-pills .dr-pill-btn:active .dr-pill-text {
  color: var(--fo-text-onGold);
  font-weight: var(--fo-font-weight-medium);
}

.dr-frame[data-turn="mine"] .dr-card-pills .dr-pill-btn:focus-visible {
  outline: none;
  box-shadow: var(--fo-shadow-draft-pillFocus);
}

/* Default link styling: token-bound and never blue by default. */
.mantine-Anchor-root {
  color: var(--fo-text-primary);
}

.mantine-Anchor-root[data-underline="always"],
.mantine-Anchor-root[data-underline="hover"] {
  text-decoration-color: var(--fo-border);
}

.link-plain {
  text-decoration: none;
  color: inherit;
}

.link-plain:hover {
  text-decoration: underline;
  text-decoration-color: var(--fo-border);
}

/* Mantine component skins bound to tokens (no per-component color logic). */
.mantine-Card-root {
  background: var(--fo-surface-card-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  color: var(--fo-text-primary);
  box-shadow: none;
}

.mantine-Button-root {
  box-shadow: none;
  /* Override Mantine's inline color resolver vars (default is "blue"). */
  --button-bg: var(--fo-surface-card-primary) !important;
  --button-hover: var(--fo-surface-pill) !important;
  --button-color: var(--fo-text-primary) !important;
  --button-bd: var(--fo-border-width) solid var(--fo-border) !important;
}

.mantine-Button-root[data-variant="default"] {
  background: var(--fo-surface-card-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  color: var(--fo-text-primary);
  --button-bg: var(--fo-surface-card-primary) !important;
  --button-hover: var(--fo-surface-pill) !important;
  --button-color: var(--fo-text-primary) !important;
  --button-bd: var(--fo-border-width) solid var(--fo-border) !important;
}

.mantine-Button-root[data-variant="filled"] {
  /* Use background-color (not shorthand) so hover/active can override cleanly. */
  background-color: var(--button-bg);
  border: var(--fo-border-width) solid var(--fo-button-primary-border);
  color: var(--fo-text-onGold);
  --button-bg: var(--fo-gold-primary) !important;
  --button-hover: var(--fo-button-primary-hover) !important;
  --button-color: var(--fo-text-onGold) !important;
  --button-bd: var(--fo-border-width) solid var(--fo-button-primary-border) !important;
}

.mantine-Button-root[data-variant="filled"]:hover {
  background-color: var(--button-hover);
  --button-bd: var(--fo-border-width) solid var(--fo-button-primary-border-hover) !important;
}

.mantine-Button-root[data-variant="filled"]:active {
  background-color: var(--button-bg);
  --button-bg: var(--fo-button-primary-active) !important;
  --button-hover: var(--fo-button-primary-active) !important;
  --button-bd: var(--fo-border-width) solid var(--fo-button-primary-border-hover) !important;
  transform: translateY(var(--fo-press-offset));
}

.mantine-Button-root[data-variant="subtle"] {
  background: transparent;
  border-color: transparent;
  color: var(--fo-text-deemphasized);
  --button-bg: transparent !important;
  --button-hover: var(--fo-surface-pill) !important;
  --button-color: var(--fo-text-deemphasized) !important;
  --button-bd: transparent !important;
}

.mantine-Button-root:disabled,
.mantine-Button-root[data-disabled] {
  opacity: var(--fo-alpha-60);
  cursor: not-allowed;
  color: var(--fo-text-deemphasized);
  --button-color: var(--fo-text-deemphasized) !important;
}

.mantine-Checkbox-root {
  /* Keep checkbox accent in-token; prevents default blue. */
  --checkbox-color: var(--fo-gold-primary) !important;
  --checkbox-icon-color: var(--fo-text-onGold) !important;
}

.mantine-Menu-dropdown {
  background: var(--fo-surface-card-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  box-shadow: none;
}

.mantine-Menu-item {
  border-radius: var(--fo-radius-small);
}

.mantine-TextInput-input,
.mantine-PasswordInput-input,
.mantine-Textarea-input,
.mantine-Select-input,
.mantine-MultiSelect-input {
  background: var(--fo-surface-pill);
  border: var(--fo-border-width) solid var(--fo-border);
  color: var(--fo-text-primary);
  border-radius: var(--fo-radius-small);
}

.mantine-TextInput-input:focus,
.mantine-PasswordInput-input:focus,
.mantine-Textarea-input:focus,
.mantine-Select-input:focus,
.mantine-MultiSelect-input:focus {
  outline: none;
  box-shadow: none;
  border-color: var(--fo-border);
}

.mantine-TextInput-label,
.mantine-PasswordInput-label,
.mantine-Textarea-label,
.mantine-Select-label,
.mantine-MultiSelect-label {
  color: var(--fo-text-deemphasized);
  font-weight: 400;
}

.mantine-Combobox-dropdown,
.mantine-Select-dropdown,
.mantine-MultiSelect-dropdown {
  background: var(--fo-surface-card-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  box-shadow: none;
  max-height: min(320px, calc(100vh - 180px));
  overflow: hidden;
}

.mantine-Combobox-options,
.mantine-Select-options,
.mantine-MultiSelect-options {
  max-height: min(280px, calc(100vh - 220px));
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.mantine-Select-option,
.mantine-MultiSelect-option {
  border-radius: var(--fo-radius-small);
}

.mantine-Select-option[data-selected],
.mantine-MultiSelect-option[data-selected] {
  background: var(--fo-surface-pill);
  color: var(--fo-text-primary);
}

.mantine-Checkbox-input {
  background: var(--fo-surface-pill);
  border: var(--fo-border-width) solid var(--fo-border);
  border-radius: var(--fo-radius-small);
}

.mantine-Checkbox-input:checked {
  background: var(--fo-surface-card-primary);
  border-color: var(--fo-border);
}

.mantine-Checkbox-icon {
  color: var(--fo-text-primary);
}

.page {
  min-height: 100vh;
  display: flex;
  justify-content: center;
}

.auth-page {
  min-height: 100vh;
  display: flex;
  justify-content: center;
}

.auth-inner {
  display: flex;
  flex-direction: column;
  width: min(80vw, var(--fo-layout-maxWidth));
  padding: var(--fo-section-gap) var(--fo-gutter-mobile) var(--fo-section-gap);
}

.auth-header {
  padding: 0;
}

.auth-content {
  width: 100%;
  max-width: var(--fo-layout-authMaxWidth);
  margin: 0 auto;
}

.draft-page {
  justify-content: flex-start;
  width: 100%;
}

.page-inner {
  display: flex;
  flex-direction: column;
  width: min(80vw, var(--fo-layout-maxWidth));
  padding: var(--fo-section-gap) var(--fo-gutter-mobile) var(--fo-section-gap);
}

.draft-page-inner {
  width: 100%;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  padding: 0;
}

.draft-content {
  flex: 1;
  width: 100%;
  min-height: 0;
  display: flex;
}

.site-header {
  margin-bottom: var(--fo-card-gap);
}

.site-header-row {
  width: 100%;
}

.site-header-actions {
  margin-left: auto;
}

.brand {
  text-decoration: none;
  color: var(--fo-gold-primary);
}

.site-title {
  margin: 0;
  font-size: var(--fo-font-size-xl);
  line-height: var(--fo-line-height-h1);
}

.theme-toggle {
  padding-inline: var(--fo-gutter-mobile);
}

.gicon {
  font-family: "Material Symbols Outlined";
  font-weight: 400;
  font-style: normal;
  font-size: var(--fo-icon-size-lg);
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-smoothing: antialiased;
}

/* Material Symbols category icons (filled). */
.mi-icon {
  font-family: "Material Symbols Outlined";
  font-variation-settings:
    "FILL" 1,
    "wght" 500,
    "GRAD" 0,
    "opsz" 24;
  font-size: var(--fo-icon-size-md);
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  padding: calc(var(--fo-space-2) + var(--fo-space-hairline)); /* 3px */
  box-sizing: border-box;
  background: transparent;
  /* Default to "current readable text" for the scheme (ivory in dark, charcoal in light). */
  color: var(--fo-text-primary);
}

.mi-icon-inverted {
  /* Inverted = dark circle + light glyph (presentation-only). */
  background: var(--fo-charcoal-9);
  color: var(--fo-ivory);
  font-variation-settings:
    "FILL" 1,
    "wght" 500,
    "GRAD" 0,
    "opsz" 24;
}

.mi-icon.mi-icon-tiny {
  font-size: var(--fo-icon-size-sm);
  font-variation-settings:
    "FILL" 1,
    "wght" 600,
    "GRAD" 0,
    "opsz" 20;
}

.mi-icon.mi-icon-tiny.mi-icon-inverted {
  padding: var(--fo-space-hairline);
}

.mi-icon.is-suppressed {
  color: var(--fo-text-deemphasized) !important;
}

.mi-icon.is-inherit {
  color: inherit !important;
}

.wizard-panel.is-primary {
  background: var(--fo-surface-card-hero);
  border-color: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-18));
}

:root[data-mantine-color-scheme="dark"] .wizard-panel.is-primary,
body[data-mantine-color-scheme="dark"] .wizard-panel.is-primary {
  border-color: rgba(var(--fo-ivory-rgb), var(--fo-alpha-18));
}

.wizard-inline-check {
  font-size: var(--fo-icon-size-md);
  color: var(--fo-gold-primary);
  line-height: 1;
}

.nomination-group-title {
  margin: 0;
  font-family: var(--mantine-font-family-headings);
  font-size: var(--fo-icon-size-md);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-eyebrow);
  text-transform: uppercase;
}

.nomination-group-count {
  color: var(--fo-text-deemphasized);
}

.nomination-groups {
  width: 100%;
}

.nomination-group + .nomination-group {
  border-top: var(--fo-border-width) solid var(--fo-border);
  padding-top: var(--fo-space-xs);
  margin-top: var(--fo-space-xs);
}

.nomination-group-header {
  padding-block: calc(var(--fo-space-4) + var(--fo-space-2)); /* 6px */
  cursor: pointer;
  user-select: none;
}

.nomination-group-header:focus-visible {
  outline: var(--fo-border-width-strong) solid
    rgba(var(--fo-charcoal-rgb), var(--fo-alpha-24));
  outline-offset: var(--fo-space-2);
}

:root[data-mantine-color-scheme="dark"] .nomination-group-header:focus-visible,
body[data-mantine-color-scheme="dark"] .nomination-group-header:focus-visible {
  outline: var(--fo-border-width-strong) solid
    rgba(var(--fo-ivory-rgb), var(--fo-alpha-18));
}

.nomination-group-chevron {
  color: var(--fo-text-deemphasized);
}

.nomination-list {
  width: 100%;
  margin-top: calc(var(--fo-space-4) + var(--fo-space-2)); /* 6px */
}

.nomination-row.nomination-row-compact {
  padding-block: var(--fo-space-4);
  padding-inline: calc(var(--fo-space-4) + var(--fo-space-2)); /* 6px */
  border-radius: var(--fo-radius-small);
}

.nomination-row.nomination-row-compact:hover {
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-04));
}

:root[data-mantine-color-scheme="dark"] .nomination-row.nomination-row-compact:hover,
body[data-mantine-color-scheme="dark"] .nomination-row.nomination-row-compact:hover {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-04));
}

.nomination-row.nomination-row-compact + .nomination-row.nomination-row-compact {
  border-top: var(--fo-border-width) solid
    rgba(var(--fo-charcoal-rgb), var(--fo-alpha-08));
}

:root[data-mantine-color-scheme="dark"]
  .nomination-row.nomination-row-compact
  + .nomination-row.nomination-row-compact,
body[data-mantine-color-scheme="dark"]
  .nomination-row.nomination-row-compact
  + .nomination-row.nomination-row-compact {
  border-top: var(--fo-border-width) solid rgba(var(--fo-ivory-rgb), var(--fo-alpha-08));
}

.nomination-row.is-dragging {
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-06));
  box-shadow: var(--fo-shadow-dragging);
}

:root[data-mantine-color-scheme="dark"] .nomination-row.is-dragging,
body[data-mantine-color-scheme="dark"] .nomination-row.is-dragging {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-06));
  box-shadow: var(--fo-shadow-dragging);
}

.nomination-row.is-drop-target {
  box-shadow: inset 0 var(--fo-border-width-strong) 0 var(--fo-gold-primary);
}

.nomination-drag-handle-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: grab;
  background: transparent;
  border: 0;
  padding: 0;
  color: inherit;
}

.nomination-drag-handle-button:active {
  cursor: grabbing;
}

.nomination-drag-handle {
  font-size: var(--fo-icon-size-md);
  color: var(--fo-text-deemphasized);
  line-height: 1;
}

.nomination-subtitle {
  color: var(--fo-text-deemphasized);
  margin-top: var(--fo-space-2);
}

.nomination-trash {
  color: var(--fo-text-deemphasized);
}

.nomination-row:hover .nomination-trash {
  color: var(--fo-text-primary);
}

/* Admin Results: sticky save bar + category winner marker */
.results-sticky-header {
  position: sticky;
  top: var(--fo-space-dense-2);
  z-index: 5;
  padding: var(--fo-space-dense-2) var(--fo-space-xs);
  margin-bottom: var(--fo-space-dense-2);
  border-radius: calc(var(--fo-radius-medium) + var(--fo-space-2)); /* 10px */
  background: rgba(var(--fo-charcoal-rgb), var(--fo-alpha-03));
  border: var(--fo-border-width) solid rgba(var(--fo-charcoal-rgb), var(--fo-alpha-08));
  backdrop-filter: blur(var(--fo-blur-sm));
}

:root[data-mantine-color-scheme="dark"] .results-sticky-header,
body[data-mantine-color-scheme="dark"] .results-sticky-header {
  background: rgba(var(--fo-ivory-rgb), var(--fo-alpha-05));
  border: var(--fo-border-width) solid rgba(var(--fo-ivory-rgb), var(--fo-alpha-08));
}

.results-winner-checkSlot {
  width: calc(var(--fo-icon-size-md) + var(--fo-space-4)); /* 22px */
  display: inline-flex;
  justify-content: center;
  align-items: center;
  flex: 0 0 calc(var(--fo-icon-size-md) + var(--fo-space-4));
}

.results-winner-check {
  width: var(--fo-icon-size-md);
  height: var(--fo-icon-size-md);
  border-radius: var(--fo-radius-pill);
  background: var(--fo-gold-primary);
  color: var(--fo-ivory);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.results-winner-check .gicon {
  font-size: var(--fo-icon-size-sm);
  line-height: 1;
}

/* Draft nominee tooltip card (first pass based on .dev/card-test.html) */
.fo-tip {
  width: var(--fo-tip-width);
  max-width: var(--fo-tip-width);
  display: block;
  position: relative;
  background: var(--fo-surface-card-primary);
  color: var(--fo-text-primary);
  border: var(--fo-border-width) solid var(--fo-border);
  border-radius: var(--fo-tip-radius);
  overflow: visible;
}

.fo-tip-bar {
  display: flex;
  align-items: center;
  min-height: var(--fo-tip-bar-minHeight);
  padding: var(--fo-tip-bar-paddingY) var(--fo-tip-bar-paddingX);
}

.fo-tip-header {
  border-bottom: var(--fo-border-width) solid
    rgba(var(--fo-text-primary-rgb), var(--fo-alpha-12));
}

.fo-tip.has-draftedChip {
  padding-top: var(--fo-space-xs);
}

.fo-tip-draftedChip {
  position: absolute;
  top: var(--fo-space-0);
  right: var(--fo-space-xs);
  transform: translateY(calc(var(--fo-space-0) - var(--fo-space-dense-2)));
  z-index: 2;
  max-width: calc(var(--fo-tip-width) - var(--fo-space-md));
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--fo-space-8);
  min-height: var(--fo-control-height);
  padding: var(--fo-space-4) var(--fo-space-8);
  border: var(--fo-border-width) solid var(--fo-gold-primary);
  border-radius: var(--fo-radius-pill);
  background: var(--fo-gold-primary);
  box-shadow: 0 6px 14px rgba(var(--fo-charcoal-rgb), var(--fo-alpha-25));
}

.fo-tip-draftedChipLeft {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-space-8);
  min-width: 0;
  flex: 1 1 auto;
}

.fo-tip-draftedChipAvatar {
  flex: 0 0 auto;
}

.fo-tip-draftedChipName {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-medium);
  color: var(--fo-charcoal);
  line-height: 1.2;
  min-width: 0;
}

.fo-tip-draftedChipPick {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-semibold);
  color: var(--fo-charcoal);
  line-height: 1.1;
  flex: 0 0 auto;
}

.fo-tip-footer {
  border-top: var(--fo-border-width) solid
    rgba(var(--fo-text-primary-rgb), var(--fo-alpha-12));
  justify-content: space-between;
}

.fo-tip-action {
  padding: var(--fo-space-dense-2) var(--fo-space-xs);
  border-top: var(--fo-border-width) solid
    rgba(var(--fo-text-primary-rgb), var(--fo-alpha-12));
}

.fo-tip-barText {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-medium);
  color: rgba(var(--fo-text-primary-rgb), var(--fo-alpha-65));
  letter-spacing: var(--fo-letterSpacing-meta);
  text-transform: uppercase;
}

.fo-tip-body {
  padding: var(--fo-tip-body-padding);
}

.fo-tip-card {
  display: grid;
  grid-template-columns: var(--fo-tip-poster-width) 1fr;
  gap: var(--fo-tip-card-gap);
  align-items: start;
}

.fo-tip-meta {
  /* Allow long lines (e.g. contributor lists) to wrap instead of overflowing the grid cell. */
  min-width: 0;
}

.fo-tip-poster {
  width: var(--fo-tip-poster-width);
  height: var(--fo-tip-poster-height);
  border-radius: var(--fo-tip-poster-radius);
  overflow: hidden;
  border: var(--fo-border-width) solid var(--fo-border);
  background: rgba(var(--fo-text-primary-rgb), 0.04);
  box-shadow: var(--fo-tip-poster-shadow);
}

.fo-tip-faceStack {
  position: relative;
  width: 100%;
  height: 100%;
}

.fo-tip-face {
  position: absolute;
  width: 56px;
  height: 56px;
  border-radius: 999px;
  border: var(--fo-border-width) solid rgba(var(--fo-charcoal-rgb), var(--fo-alpha-25));
  object-fit: cover;
  background: rgba(var(--fo-text-primary-rgb), 0.09);
  box-shadow: 0 6px 16px rgba(var(--fo-charcoal-rgb), var(--fo-alpha-25));
}

.fo-tip-face.is-ph {
  background: rgba(var(--fo-text-primary-rgb), 0.12);
}

.fo-tip-face.face-1 {
  top: 8px;
  left: 8px;
}

.fo-tip-face.face-2 {
  top: 34px;
  left: 10px;
}

.fo-tip-face.face-3 {
  top: 20px;
  left: 42px;
}

.fo-tip-face.is-solo {
  width: 64px;
  height: 64px;
  top: 22px;
  left: 4px;
}

.fo-tip-poster-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.fo-tip-poster-ph {
  width: 100%;
  height: 100%;
}

.fo-tip-hero {
  display: flex;
  flex-wrap: wrap;
  gap: var(--fo-tip-hero-gap, var(--fo-space-4));
  align-items: baseline;
}

.fo-tip-name {
  font-size: var(--fo-font-size-sm);
  font-weight: var(--fo-font-weight-bold);
  line-height: 1.15;
  margin: var(--fo-space-0) var(--fo-space-0) var(--fo-space-4) var(--fo-space-0);
}

.fo-tip-support {
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-medium);
  color: rgba(var(--fo-text-primary-rgb), 0.55);
  line-height: 1.15;
}

.fo-tip-sub {
  font-size: var(--fo-font-size-xs);
  line-height: 1.3;
  color: var(--fo-text-deemphasized);
  margin: var(--fo-space-0);
  white-space: normal;
  overflow-wrap: anywhere;
}

.fo-tip-sub + .fo-tip-sub {
  margin-top: var(--fo-space-4);
}

.fo-tip-performanceMeta {
  display: grid;
  gap: var(--fo-space-4);
}

.fo-tip-performanceLine {
  display: grid;
}

.fo-tip-tmdbLink {
  display: inline-flex;
  align-items: center;
  color: rgba(var(--fo-text-primary-rgb), 0.6);
}

.fo-tip-tmdbLogo {
  height: var(--fo-icon-size-sm);
  width: auto;
  display: block;
}

.fo-tip-attribution {
  font-size: var(--fo-font-size-xs);
  color: rgba(var(--fo-text-primary-rgb), 0.6);
  line-height: 1.2;
}

.header-status {
  display: flex;
  justify-content: flex-end;
}

.site-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--fo-card-gap);
  padding: 0;
  border-radius: 0;
  border: 0;
  background: transparent;
  margin-bottom: var(--fo-card-gap);
}

.site-nav.is-collapsed {
  /* Keep in DOM for measurement, but remove it from the visual layout. */
  height: 0;
  margin: 0;
  overflow: hidden;
  opacity: var(--fo-alpha-00);
  pointer-events: none;
}

.nav-links {
  display: flex;
  align-items: flex-start;
  gap: var(--fo-card-gap);
  flex-wrap: nowrap;
}

.nav-link {
  text-decoration: none;
  color: var(--fo-text-deemphasized);
  padding: calc(var(--fo-gutter-mobile) * 0.5) calc(var(--fo-gutter-mobile) * 0.75);
  border-radius: var(--fo-radius-small);
  border-bottom: var(--fo-border-width) solid transparent;
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tight);
}

.nav-link:hover {
  color: var(--fo-text-primary);
  border-bottom-color: var(--fo-border);
  background: transparent;
}

.nav-link.active {
  color: var(--fo-text-primary);
  border-bottom-color: var(--fo-gold-primary);
  background: transparent;
}

.admin-navTriggerCaret {
  display: inline-block;
  margin-left: calc(var(--fo-gutter-mobile) * 0.25);
  opacity: var(--fo-alpha-80);
  font-size: var(--fo-font-size-xs);
  transform: translateY(-1px) rotate(0deg);
  transition: transform 140ms ease;
}

.admin-navGroup {
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
}

.admin-navGroup.is-open .admin-navTriggerCaret {
  transform: translateY(-1px) rotate(180deg);
}

.admin-navDrawer {
  display: none;
  flex-direction: column;
  align-items: flex-start;
  position: absolute;
  top: calc(100% + (var(--fo-gutter-mobile) * 0.15));
  left: 0;
  z-index: 2;
  background: var(--fo-surface-page);
  border: var(--fo-border-width) solid var(--fo-border);
  border-radius: var(--fo-radius-medium);
  padding: calc(var(--fo-gutter-mobile) * 0.35);
  box-shadow: 0 10px 24px rgba(var(--fo-text-primary-rgb), 0.12);
}

.admin-navDrawer.is-open {
  display: inline-flex;
}

.admin-navDrawerLink {
  padding-top: calc(var(--fo-gutter-mobile) * 0.45);
  padding-bottom: calc(var(--fo-gutter-mobile) * 0.45);
}

.admin-cardHeadingLink {
  color: inherit;
  text-decoration: none;
}

.admin-usersRoleActions {
  margin-left: auto;
}

.nav-actions {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  margin-left: auto;
}

.nav-admin {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  padding-left: var(--fo-gutter-mobile);
  margin-left: var(--fo-gutter-mobile);
  border-left: var(--fo-border-width) solid var(--fo-border);
}

.nav-section {
  color: var(--fo-text-deemphasized);
  text-transform: uppercase;
  letter-spacing: var(--fo-letterSpacing-eyebrow);
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-bold);
  padding: 0;
}

.nav-user {
  text-decoration: none;
  color: var(--fo-text-primary);
  font-weight: var(--fo-font-weight-bold);
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--fo-border);
  background: transparent;
}

.menu {
  position: relative;
}

.menu-button {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
}

.caret {
  opacity: var(--fo-alpha-80);
  font-size: var(--fo-font-size-xs);
}

.menu-panel {
  position: absolute;
  right: 0;
  top: calc(100% + var(--fo-gutter-mobile));
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--fo-border);
  background: var(--fo-surface-card-primary);
  box-shadow: none;
  padding: var(--fo-gutter-mobile);
  z-index: 50;
}

.menu-item {
  width: 100%;
  text-align: left;
  background: transparent;
  color: var(--fo-text-primary);
  border: var(--fo-border-width) solid transparent;
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  font-weight: var(--fo-font-weight-bold);
}

.menu-item:hover {
  border-color: var(--fo-border);
  background: transparent;
  transform: none;
  box-shadow: none;
}

.menu-item.danger {
  color: var(--muted);
}

.menu-sep {
  height: var(--fo-border-width);
  background: var(--border);
  margin: var(--fo-gutter-mobile) 0;
}

.nav-muted {
  color: var(--muted);
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-regular);
}

.site-content {
  flex: 1;
}

.hero {
  background: var(--fo-surface-card-hero);
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  padding: var(--fo-section-gap);
  margin-bottom: var(--fo-section-gap);
  box-shadow: none;
}

.landing {
  padding: 0;
}

.landing-see-all {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--fo-control-height);
  padding: var(--fo-space-0) var(--fo-control-padding-x);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: transparent;
  text-decoration: none;
  color: var(--muted);
  font-weight: var(--fo-font-weight-bold);
}

.landing-see-all:hover {
  color: var(--text);
  border-color: var(--border);
  background: transparent;
}

.stack-sm {
  display: grid;
  gap: var(--fo-gutter-mobile);
  margin-top: var(--fo-gutter-mobile);
}

.hero-title {
  margin: 0 0 var(--fo-gutter-mobile);
  font-size: var(--fo-font-size-xl);
  line-height: 1.12;
}

.hero-actions {
  display: flex;
  gap: var(--fo-card-gap);
  flex-wrap: wrap;
  margin-top: var(--fo-card-gap);
}

.eyebrow {
  letter-spacing: var(--fo-letterSpacing-eyebrow);
  text-transform: uppercase;
  font-size: var(--fo-font-size-xs);
  color: var(--accent);
  margin: 0 0 var(--fo-gutter-mobile);
}

h1 {
  margin: 0 0 var(--fo-space-xs);
  font-size: var(--fo-font-size-xl);
}

.lede {
  margin: 0;
  color: var(--muted);
  line-height: 1.6;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
  gap: var(--fo-card-gap);
  margin-top: var(--fo-card-gap);
}

.card {
  background: var(--panel);
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  padding: var(--fo-card-gap);
  box-shadow: none;
}

/*
  Legacy raw-HTML styling.
  Keep it available for any remaining non-Mantine pages, but DO NOT allow it to
  leak into Mantine components (Mantine renders <button>/<input>).
*/

.fo-legacy form {
  display: grid;
  gap: var(--fo-gutter-mobile);
}

.fo-legacy .field {
  display: grid;
  gap: var(--fo-gutter-mobile);
}

.fo-legacy .field span {
  font-size: var(--fo-font-size-sm);
  color: var(--muted);
}

.fo-legacy input {
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--text);
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  font-size: var(--fo-font-size-sm);
}

.fo-legacy input[aria-invalid="true"] {
  border-color: var(--error);
}

.fo-legacy button {
  height: var(--fo-control-height);
  border: var(--fo-border-width) solid var(--border);
  background: var(--panel);
  color: var(--text);
  padding: var(--fo-space-0) var(--fo-control-padding-x);
  border-radius: var(--fo-radius-small);
  font-weight: var(--fo-font-weight-bold);
  cursor: pointer;
  transition: none;
}

.fo-legacy button:disabled {
  opacity: var(--fo-alpha-60);
  cursor: not-allowed;
}

.fo-legacy button:hover:not(:disabled) {
  transform: none;
  box-shadow: none;
}

.fo-legacy .button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  height: var(--fo-control-height);
  border: var(--fo-border-width) solid var(--border);
  background: var(--panel);
  color: var(--text);
  padding: var(--fo-space-0) var(--fo-control-padding-x);
  border-radius: var(--fo-radius-small);
  font-weight: var(--fo-font-weight-bold);
  cursor: pointer;
  transition: none;
}

.fo-legacy .button:hover {
  transform: none;
  box-shadow: none;
}

.fo-legacy .button.ghost {
  background: transparent;
  color: var(--muted);
  border: none;
  box-shadow: none;
  transform: none;
}

.fo-legacy .button.primary {
  background: var(--accent);
  color: var(--fo-text-onGold);
  border-color: transparent;
}

.fo-legacy .button.ghost.danger {
  color: var(--muted);
  border-color: transparent;
}

.fo-legacy .button.ghost.danger:hover {
  border-color: transparent;
  box-shadow: none;
  transform: none;
}

.fo-legacy .button.danger {
  background: var(--panel);
  color: var(--text);
}

.fo-legacy .button.danger:hover {
  box-shadow: none;
}

.error {
  color: var(--error);
}

.success {
  color: var(--success);
}

small.error {
  font-size: var(--fo-font-size-xs);
}

.muted {
  color: var(--muted);
}

.prose {
  color: var(--muted);
  line-height: 1.7;
}

.prose a {
  color: var(--text);
}

.status {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  margin-top: var(--fo-gutter-mobile);
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: transparent;
  color: var(--text);
}

.status-loading {
  color: var(--muted);
}

.status-success {
  color: var(--text);
}

.status-error {
  color: var(--text);
}

.status-warning {
  color: var(--text);
}

.banner-stack {
  display: grid;
  gap: var(--fo-card-gap);
}

.banner-region {
  margin-top: var(--fo-gutter-mobile);
  margin-bottom: var(--fo-card-gap);
}

.banner {
  width: 100%;
  display: flex;
  gap: var(--fo-card-gap);
  align-items: center;
  justify-content: space-between;
  padding: var(--fo-gutter-mobile) var(--fo-card-gap);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: var(--panel);
}

/* Utility: reset list chrome for semantic lists used as layout primitives. */
.fo-listReset {
  list-style: none;
  margin: var(--fo-space-0);
  padding: var(--fo-space-0);
}

/* Utility: centered Mantine Alert body for banners. */
.fo-alertCenteredRoot {
  justify-content: center;
}

.fo-alertCenteredBody {
  width: 100%;
  text-align: center;
}

/* Utility: common layout affordances, encoded as tokens. */
.fo-minw0 {
  min-width: var(--fo-space-0);
}

.fo-flex1Minw0 {
  flex: 1 1 auto;
  min-width: var(--fo-space-0);
}

.fo-flexFieldSm {
  flex: 1 1 var(--fo-layout-fieldBasis-sm);
  min-width: var(--fo-layout-fieldMin-sm);
}

.fo-flexFieldMd {
  flex: 1 1 var(--fo-layout-fieldBasis-md);
  min-width: var(--fo-layout-fieldMin-md);
}

.fo-flexFieldLg {
  flex: 1 1 var(--fo-layout-fieldBasis-lg);
  min-width: var(--fo-layout-fieldMin-lg);
}

.fo-flexField2Lg {
  flex: 2 1 var(--fo-layout-fieldBasis-lg);
  min-width: var(--fo-layout-fieldMin-lg);
}

.fo-clickable {
  cursor: pointer;
}

.fo-block {
  display: block;
}

.fo-letterSpacingTracked {
  letter-spacing: var(--fo-letterSpacing-tracked);
}

.fo-opacityMuted1 {
  opacity: var(--fo-opacity-muted-1);
}

.fo-opacityMuted2 {
  opacity: var(--fo-opacity-muted-2);
}

.fo-z2 {
  z-index: var(--fo-z-overlay-2);
}

.fo-codeBlock {
  white-space: pre-wrap;
  word-break: break-word;
}

.fo-navDrawerLink {
  padding-block: var(--fo-space-dense-2);
}

.fo-navDrawerLogout {
  justify-content: flex-start;
  padding-inline: var(--fo-space-0);
}

.fo-inlineFlex {
  display: inline-flex;
}

.fo-buttonColorMuted {
  --button-color: var(--fo-text-deemphasized);
}

.fo-buttonColorPrimary {
  --button-color: var(--fo-text-primary);
}

.fo-comboboxPanelNarrow {
  width: min(100%, 16.25rem);
}

.fo-filmSearchPoster {
  width: 2.625rem;
  height: 3.9375rem;
}

.fo-filmComboboxResults {
  max-height: 17.5rem;
  overflow-y: auto;
}

.fo-filmComboboxEscape {
  border-top: var(--fo-border-width) solid var(--fo-color-border);
}

.banner-body {
  min-width: 0;
}

.banner-title {
  display: block;
  margin-bottom: var(--fo-gutter-mobile);
  color: var(--text);
}

.banner-dismiss {
  border: var(--fo-border-width) solid var(--border);
  background: transparent;
  color: var(--muted);
  width: var(--fo-control-height);
  height: var(--fo-control-height);
  padding: 0;
  border-radius: var(--fo-radius-small);
  font-weight: var(--fo-font-weight-bold);
  font-size: var(--fo-font-size-md);
  line-height: 1;
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.banner-dismiss:hover {
  color: var(--text);
  border-color: var(--border);
}

.banner-info {
  border-color: var(--border);
}

.banner-warning {
  border-color: var(--border);
  background: var(--panel);
}

.banner-success {
  border-color: var(--border);
  background: var(--panel);
}

.banner-error {
  border-color: var(--border);
  background: var(--panel);
}

.spinner {
  width: var(--fo-font-size-xs);
  height: var(--fo-font-size-xs);
  border-radius: 50%;
  border: var(--fo-border-width) solid var(--border);
  border-top-color: var(--accent);
  animation: spin 640ms linear infinite;
}

.ghost {
  background: transparent;
  color: var(--muted);
  border: none;
  height: var(--fo-control-height);
  padding: 0 var(--fo-control-padding-x);
  border-radius: var(--fo-radius-small);
  font-size: var(--fo-font-size-sm);
  font-weight: var(--fo-font-weight-bold);
}

.inline-actions {
  display: flex;
  gap: var(--fo-card-gap);
  flex-wrap: wrap;
}

.status-tray {
  margin: var(--fo-gutter-mobile) 0 var(--fo-gutter-mobile);
}

.status-pill {
  display: inline-block;
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  background: var(--fo-surface-pill);
  border: var(--fo-border-width) solid var(--border);
  color: var(--muted);
  font-size: var(--fo-font-size-xs);
}

.connection-status {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  padding: 0 var(--fo-control-padding-x);
  height: var(--fo-control-height);
  border-radius: var(--fo-radius-small);
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-tight);
  border: var(--fo-border-width) solid var(--border);
  color: var(--muted);
}

.connection-status[data-state="connected"] {
  background: transparent;
}

.connection-status[data-state="reconnecting"] {
  background: transparent;
}

.connection-status[data-state="disconnected"] {
  background: transparent;
}

.site-footer {
  margin-top: var(--fo-section-gap);
  padding-top: var(--fo-card-gap);
  border-top: var(--fo-border-width) solid var(--border);
  display: flex;
  flex-direction: column;
  gap: var(--fo-card-gap);
}

.footer-col {
  min-width: 0;
}

.footer-col-title {
  margin: 0 0 var(--fo-gutter-mobile);
  color: var(--text);
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-eyebrow);
  text-transform: uppercase;
}

.footer-col-links {
  display: grid;
  gap: var(--fo-gutter-mobile);
}

.footer-col-links a {
  color: var(--muted);
  text-decoration: none;
  font-weight: var(--fo-font-weight-regular);
  font-size: var(--fo-font-size-xs);
}

.footer-col-links a:hover {
  color: var(--text);
  text-decoration: underline;
  text-decoration-color: var(--border);
}

.footer-logo-link {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  width: fit-content;
  padding: 0;
  border: 0;
  border-radius: 0;
  background: transparent;
  color: var(--muted);
  opacity: var(--fo-opacity-muted-2);
}

.footer-logo-link:hover {
  color: var(--text);
  opacity: var(--fo-alpha-100);
}

.footer-logo {
  height: calc(var(--fo-font-size-sm) + var(--fo-space-2));
  width: auto;
  display: block;
}

.footer-fineprint {
  padding-top: var(--fo-gutter-mobile);
  border-top: var(--fo-border-width) solid var(--border);
  margin: 0;
  color: var(--muted);
  font-size: var(--fo-font-size-xs);
  font-weight: 400;
  line-height: 1.35;
}

.admin-shell {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--fo-card-gap);
  align-items: start;
}

.admin-header {
  display: flex;
  flex-direction: column;
  gap: var(--fo-gutter-mobile);
}

.admin-content {
  min-width: 0;
}

.admin-page-header {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--fo-gutter-mobile);
}

.admin-index-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--fo-gutter-mobile);
  padding: var(--fo-card-gap);
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  background: var(--fo-surface-card-primary);
  text-decoration: none;
  color: var(--text);
}

.admin-index-row:hover {
  border-color: var(--fo-border);
}

.admin-next-step {
  padding: calc(var(--fo-card-gap) * 1.5);
  border: calc(var(--fo-border-width) * 3) solid var(--accent);
  border-radius: var(--fo-radius-medium);
  background: var(--fo-surface-card-hero);
  box-shadow: var(--fo-shadow-adminNextStep);
}

.admin-workflow-row {
  width: 100%;
  text-align: left;
  padding: calc(var(--fo-space-4) + var(--fo-space-2)) 0;
  border-radius: var(--fo-radius-small);
  color: var(--text);
  cursor: default;
}

.admin-workflow-row[disabled] {
  opacity: var(--fo-alpha-70);
}

.admin-archive {
  opacity: var(--fo-opacity-muted-2);
}

.admin-help-icon {
  width: var(--fo-control-height);
  height: var(--fo-control-height);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--fo-radius-pill);
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--text);
}

.admin-help-icon:hover {
  border-color: var(--fo-border);
}

.admin-add-row {
  display: flex;
  gap: var(--fo-gutter-mobile);
  align-items: flex-end;
}

.admin-add-select {
  flex: 1;
  min-width: 0;
}

.admin-category-list {
  display: flex;
  flex-direction: column;
  margin: 0;
  padding: 0;
}

.admin-category-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--fo-space-xs);
  padding: calc(var(--fo-space-xs) + var(--fo-space-2)) 0;
}

.admin-category-row + .admin-category-row {
  border-top: var(--fo-border-width) solid var(--border);
}

.admin-trash {
  color: var(--muted);
  opacity: var(--fo-alpha-60);
}

.admin-trash:hover {
  color: var(--error);
  opacity: var(--fo-alpha-100);
}

.admin-secondary-actions {
  display: flex;
  gap: var(--fo-space-sm);
  align-items: center;
}

.link-action {
  padding: 0;
  background: transparent;
  border: 0;
  color: var(--muted);
  font-weight: var(--fo-font-weight-bold);
  font-size: var(--fo-font-size-sm);
}

.link-action:hover {
  color: var(--text);
  text-decoration: underline;
}

.wizard-shell {
  width: 100%;
  gap: var(--fo-card-gap);
}

.wizard-stepper {
  width: var(--fo-layout-wizardStepperWidth);
  flex: 0 0 var(--fo-layout-wizardStepperWidth);
  flex-shrink: 0;
  position: sticky;
  top: var(--fo-space-sm);
}

@media (max-width: 900px) {
  .wizard-stepper {
    width: var(--fo-layout-wizardStepperWidthCompact);
    flex-basis: var(--fo-layout-wizardStepperWidthCompact);
  }
}

.wizard-step {
  position: relative;
}

.wizard-step.is-active::before {
  content: "";
  position: absolute;
  left: calc(var(--fo-space-dense-2) * -1);
  top: 0;
  height: 100%;
  width: calc(var(--fo-space-2) + var(--fo-space-hairline));
  border-radius: var(--fo-radius-small);
  background: var(--fo-gold-primary);
}

.wizard-step .wizard-step-icon {
  font-size: calc(var(--fo-font-size-sm) + var(--fo-space-2));
}

/* Base icon + connector styling (semantic overrides per-step classes below). */
.wizard-step .mantine-Stepper-stepIcon {
  background: transparent;
  border-color: var(--border);
  color: var(--muted);
}

.wizard-step .mantine-Stepper-verticalSeparator,
.wizard-step .mantine-Stepper-separator {
  background: var(--border);
}

.wizard-step.connector-gold .mantine-Stepper-verticalSeparator,
.wizard-step.connector-gold .mantine-Stepper-separator {
  background: var(--fo-gold-primary);
}

/* Completed steps */
.wizard-step.is-complete .mantine-Stepper-stepIcon,
.wizard-step.is-locked .mantine-Stepper-stepIcon {
  background: var(--fo-gold-primary);
  border-color: var(--fo-gold-primary);
  color: var(--fo-ivory);
}

/* Locked/gated use the same icon (lock), but label weight differs. */
.wizard-step.is-locked .mantine-Stepper-stepLabel {
  color: var(--muted);
}

/* Incomplete editable: ring treatment. Gold only within completed progress range. */
.wizard-step.is-incomplete.is-progress .mantine-Stepper-stepIcon {
  background: transparent;
  border-color: var(--fo-gold-primary);
  color: var(--fo-gold-primary);
}

.wizard-step.is-incomplete.is-future .mantine-Stepper-stepIcon {
  background: transparent;
  border-color: var(--border);
  color: var(--muted);
}

/* Gated: muted + no gold. */
.wizard-step.is-gated .mantine-Stepper-stepIcon {
  background: var(--fo-surface-pill);
  border-color: var(--border);
  color: var(--muted);
}

.wizard-step.is-gated .mantine-Stepper-stepLabel {
  color: var(--muted);
}

/* Current step focus is independent of state encoding. */
.wizard-step.is-active .mantine-Stepper-stepLabel {
  font-weight: var(--fo-font-weight-bold);
  color: var(--text);
}

.wizard-content {
  flex: 1;
  min-width: 0;
}

.wizard-nav {
  padding-top: var(--fo-gutter-mobile);
  border-top: var(--fo-border-width) solid var(--border);
}

/* Ceremony wizard: progressive disclosure within a step (Populate nominees). */
.wizard-accordion {
  border: 0;
  background: transparent;
}

.wizard-accordion-item {
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-medium);
  background: var(--panel);
  overflow: hidden;
}

.wizard-accordion-item + .wizard-accordion-item {
  margin-top: var(--fo-card-gap);
}

.wizard-accordion-item.is-optional {
  background: transparent;
}

.wizard-accordion-item.is-optional .mantine-Accordion-control {
  color: var(--muted);
}

.wizard-accordion-item.is-primary {
  border-width: var(--fo-border-width-strong);
  background: var(--fo-surface-pill);
}

.wizard-accordion-item.is-primary .mantine-Accordion-control {
  color: var(--text);
}

.wizard-accordion-item .mantine-Accordion-control {
  padding: calc(var(--fo-space-xs) + var(--fo-space-2)) var(--fo-space-sm);
}

.wizard-accordion-item .mantine-Accordion-panel {
  padding: 0 var(--fo-space-sm) var(--fo-space-sm);
}

@media (max-width: 500px) {
  .wizard-shell {
    flex-direction: column;
  }

  .wizard-stepper {
    width: 100%;
    flex: 1 1 auto;
    position: static;
  }
}

.header-with-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--fo-space-sm);
  flex-wrap: wrap;
}

@media (max-width: 500px) {
  .header-with-controls {
    flex-direction: column;
    align-items: stretch;
  }

  .header-with-controls > * {
    width: 100%;
  }

  /* Make common "header controls" groups usable on mobile without horizontal squeeze. */
  .header-with-controls .inline-actions {
    width: 100%;
  }

  .header-with-controls .inline-actions .mantine-Select-root,
  .header-with-controls .inline-actions .mantine-TextInput-root {
    flex: 1 1 100%;
    min-width: 0;
  }

  .admin-add-row,
  .inline-form {
    flex-direction: column;
    align-items: stretch;
  }

  .admin-add-select {
    width: 100%;
  }
}

.admin-subnav {
  display: flex;
  gap: var(--fo-gutter-mobile);
  flex-wrap: wrap;
  padding: var(--fo-gutter-mobile) 0 0;
  border-top: var(--fo-border-width) solid var(--border);
  margin-top: var(--fo-gutter-mobile);
}

.admin-sublink {
  text-decoration: none;
  color: var(--muted);
  font-weight: var(--fo-font-weight-bold);
  font-size: var(--fo-font-size-sm);
  padding: 0 var(--fo-control-padding-x);
  height: var(--fo-control-height);
  display: inline-flex;
  align-items: center;
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid transparent;
}

.admin-sublink:hover {
  color: var(--text);
  border-color: var(--border);
  background: transparent;
}

.admin-sublink.is-active {
  color: var(--text);
  border-color: var(--border);
  background: var(--fo-surface-pill);
}

@media (min-width: 60em) {
  .admin-shell {
    grid-template-columns: 1fr;
  }
}

.state-switcher label {
  display: grid;
  gap: var(--fo-gutter-mobile);
  font-size: var(--fo-font-size-xs);
  color: var(--muted);
}

.empty-state {
  border: var(--fo-border-width) dashed var(--border);
  padding: var(--fo-card-gap);
  border-radius: var(--fo-radius-small);
  background: var(--panel);
}

.inline-form {
  display: flex;
  flex-wrap: wrap;
  gap: var(--fo-gutter-mobile);
  align-items: flex-end;
}

.inline-input {
  width: 100%;
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--text);
}

.pill-toggle {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  font-weight: var(--fo-font-weight-bold);
  color: var(--muted);
}

.stack {
  display: flex;
  flex-direction: column;
  gap: var(--fo-space-xs);
}

.invite-table {
  display: flex;
  flex-direction: column;
  gap: var(--fo-space-xs);
}

.list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: var(--fo-gutter-mobile);
}

.list-row {
  display: flex;
  justify-content: space-between;
  gap: var(--fo-space-xs);
  padding: var(--fo-gutter-mobile);
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  background: var(--fo-surface-pill);
}

.season-invite-row {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--fo-space-8);
}

.season-invite-name {
  font-size: var(--fo-font-size-sm);
  font-weight: var(--fo-font-weight-regular);
  line-height: var(--fo-line-height-body);
  color: var(--fo-text-primary);
}

.season-invite-actions {
  margin-top: 0;
}

.season-grid {
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
}

.draft-card .inline-form {
  display: flex;
  flex-wrap: wrap;
  gap: var(--fo-gutter-mobile);
  align-items: flex-end;
  margin-bottom: var(--fo-gutter-mobile);
}

.draft-shell {
  width: 100%;
  padding: 0;
  font-size: var(--fo-db-header-font);
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow-x: hidden;
}

.draft-shell .pill {
  display: inline-flex;
  align-items: center;
  height: var(--fo-db-pill-rowHeight);
  padding: 0 var(--fo-db-pill-paddingX);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--muted);
  font-size: var(--fo-db-pill-font);
  font-weight: var(--fo-font-weight-bold);
  line-height: 1;
}

.draft-shell .pill.pill-active {
  border-color: transparent;
  background: var(--accent);
  color: var(--fo-text-onGold);
}

.draft-shell .nominee-pill {
  height: var(--fo-db-pill-rowHeight);
  padding: 0 var(--fo-db-pill-paddingX);
  font-size: var(--fo-db-pill-font);
  background: transparent;
}

.draft-shell .nominee-pill .nominee-icon {
  font-size: var(--fo-db-pill-font);
}

.draft-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
  gap: var(--fo-card-gap);
  margin-top: var(--fo-gutter-mobile);
}

.draft-header {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: var(--fo-gutter-mobile);
  align-items: center;
  padding: var(--fo-space-8) var(--fo-gutter-mobile);
  border-bottom: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-page);
  margin: 0 0 var(--fo-gutter-mobile);
  position: sticky;
  top: 0;
  z-index: 10;
}

.draft-header[data-my-turn="true"] .turn-timer {
  color: var(--fo-gold-primary);
}

.draft-header[data-my-turn="true"] .turn-timer-wrap {
  text-shadow: 0 0 var(--fo-font-size-md) rgba(var(--fo-gold-rgb), var(--fo-alpha-20));
}

.draft-participants {
  display: flex;
  flex-wrap: wrap;
  gap: var(--fo-gutter-mobile);
}

.pill-active {
  opacity: var(--fo-alpha-100);
}

.draft-header-left {
  display: flex;
  flex-direction: column;
  gap: var(--fo-gutter-mobile);
  align-items: flex-start;
  min-width: 0;
}

.draft-header-center {
  display: flex;
  justify-content: center;
  min-width: 0;
}

.turn-emblem {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--fo-space-2);
  text-align: center;
  min-width: 0;
}

.turn-timer-wrap {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.turn-timer {
  font-size: var(--fo-db-timer-font);
  font-weight: var(--fo-font-weight-bold);
  line-height: 1;
}

.turn-name {
  font-size: var(--fo-db-header-font);
  font-weight: var(--fo-font-weight-bold);
  line-height: 1.1;
  max-width: 42ch;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.turn-rp {
  font-size: var(--fo-db-meta-font);
  color: var(--muted);
  font-weight: var(--fo-font-weight-bold);
  letter-spacing: var(--fo-letterSpacing-eyebrow);
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.draft-header-right {
  display: flex;
  justify-content: flex-end;
  align-items: flex-end;
  min-width: 0;
}

.draft-main {
  flex: 1;
  min-height: 0;
  display: grid;
  grid-template-columns: var(--draft-cols, minmax(0, 1fr));
  gap: var(--fo-gutter-mobile);
  align-items: start;
  overflow: hidden;
}

.draft-center {
  min-width: 0;
  min-height: 0;
  overflow: auto;
}

.draft-rail {
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  background: var(--panel);
}

.draft-rail.is-collapsed {
  padding: 0;
  background: transparent;
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  overflow: hidden;
}

.rail-collapsed-label {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  writing-mode: vertical-rl;
  text-transform: uppercase;
  letter-spacing: var(--fo-letterSpacing-rail);
  font-size: var(--fo-font-size-xs);
  font-weight: var(--fo-font-weight-bold);
  color: var(--muted);
  padding: var(--fo-space-dense-2) 0;
}

.rail-collapsed-label-right {
  writing-mode: vertical-lr;
}

.rail-collapse {
  background: transparent;
  border: 0;
  color: var(--muted);
  cursor: pointer;
}

.rail-header {
  padding: var(--fo-gutter-mobile);
  border-bottom: var(--fo-border-width) solid var(--border);
}

.rail-body {
  padding: var(--fo-gutter-mobile);
  overflow: auto;
  flex: 1;
  min-height: 0;
}

.ledger-list {
  display: flex;
  flex-direction: column;
  gap: var(--fo-gutter-mobile);
}

.ledger-row {
  display: grid;
  grid-template-columns: 6ch 10ch 1fr;
  gap: var(--fo-gutter-mobile);
  align-items: center;
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
}

.ledger-row.active {
  background: var(--fo-surface-pill);
}

.draft-board {
  min-width: 0;
}

.category-columns {
  column-width: var(--fo-layout-fieldBasis-sm);
  column-gap: var(--fo-gutter-mobile);
}

.category-card {
  break-inside: avoid;
  display: inline-block;
  width: 100%;
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  padding: var(--fo-gutter-mobile);
  background: var(--panel);
  margin: 0 0 var(--fo-gutter-mobile);
}

.category-card.empty {
  opacity: var(--fo-alpha-50);
}

.category-card.empty .category-title {
  font-weight: 600;
}

.category-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: var(--fo-gutter-mobile);
}

.category-title {
  font-weight: 700;
}

.category-count {
  letter-spacing: var(--fo-letterSpacing-eyebrow);
  font-weight: var(--fo-font-weight-bold);
}

.category-body {
  display: flex;
  flex-direction: column;
  gap: var(--fo-gutter-mobile);
}

.nominee-line {
  display: block;
  width: 100%;
  text-align: left;
  background: transparent;
}

.nominee-line .nominee-pill {
  width: 100%;
  height: var(--fo-db-pill-rowHeight);
  padding: 0 var(--fo-db-pill-paddingX);
  font-size: var(--fo-db-pill-font);
  background: transparent;
}

.icon-code {
  opacity: var(--fo-opacity-muted-2);
}

.roster-board {
  margin-top: var(--fo-gutter-mobile);
}

.roster-grid {
  display: grid;
  gap: var(--fo-gutter-mobile);
}

.roster-col {
  border: var(--fo-border-width) solid var(--border);
  border-radius: var(--fo-radius-small);
  overflow: hidden;
  background: var(--panel);
}

.roster-col-header {
  padding: var(--fo-gutter-mobile);
  border-bottom: var(--fo-border-width) solid var(--border);
  display: flex;
  justify-content: space-between;
  gap: var(--fo-gutter-mobile);
  align-items: baseline;
}

.roster-col-body {
  padding: var(--fo-gutter-mobile);
  display: flex;
  flex-direction: column;
  gap: var(--fo-gutter-mobile);
}

.roster-row {
  display: block;
}

.tab-bar {
  display: inline-flex;
  gap: var(--fo-gutter-mobile);
  margin: var(--fo-card-gap) 0;
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  background: var(--fo-surface-pill);
  border: var(--fo-border-width) solid var(--border);
}

.tab {
  background: transparent;
  color: var(--muted);
  padding: 0 var(--fo-control-padding-x);
  height: var(--fo-control-height);
  display: inline-flex;
  align-items: center;
  border-radius: var(--fo-radius-small);
  border: none;
  cursor: pointer;
  font-weight: var(--fo-font-weight-bold);
  font-size: var(--fo-font-size-sm);
}

.tab.active {
  background: transparent;
  color: var(--text);
  border: var(--fo-border-width) solid var(--border);
}

.pill-actions {
  display: flex;
  gap: var(--fo-gutter-mobile);
  margin-top: var(--fo-gutter-mobile);
  flex-wrap: wrap;
}

.two-col {
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
}

.checkbox {
  display: flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  color: var(--muted);
  font-size: var(--fo-font-size-sm);
}

select {
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--text);
  padding: var(--fo-gutter-mobile);
  border-radius: var(--fo-radius-small);
  font-size: var(--fo-font-size-sm);
}

.pill-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-wrap: wrap;
  gap: var(--fo-gutter-mobile);
}

.pill {
  display: inline-flex;
  align-items: center;
  height: var(--fo-control-height);
  padding: 0 var(--fo-control-padding-x);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--muted);
  font-size: var(--fo-font-size-sm);
}

.pick-list {
  margin: 0;
  padding-left: 0;
  color: var(--text);
}

.nominee-pill {
  display: inline-flex;
  align-items: center;
  gap: var(--fo-gutter-mobile);
  max-width: 100%;
  height: var(--fo-control-height);
  padding: 0 var(--fo-control-padding-x);
  border-radius: var(--fo-radius-small);
  border: var(--fo-border-width) solid var(--border);
  background: var(--fo-surface-pill);
  color: var(--text);
  font-size: var(--fo-font-size-sm);
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.nominee-pill .nominee-name {
  overflow: hidden;
  text-overflow: ellipsis;
}

.nominee-pill .nominee-category {
  color: var(--muted);
  font-size: var(--fo-font-size-xs);
}

.nominee-pill[data-state="active"] {
  border-color: transparent;
  background: var(--accent);
  color: var(--fo-text-onGold);
}

.nominee-pill[data-state="picked"] {
  opacity: var(--fo-alpha-22);
}

.nominee-pill[data-state="disabled"] {
  opacity: var(--fo-alpha-70);
}

.pill-demo {
  display: flex;
  flex-wrap: wrap;
  gap: var(--fo-gutter-mobile);
}

.muted {
  color: var(--muted);
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
